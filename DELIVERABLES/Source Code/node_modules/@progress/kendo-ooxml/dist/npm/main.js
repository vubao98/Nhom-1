'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

function _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }

var JSZip = _interopDefault(require('jszip/dist/jszip'));

var current = {
    compile: function(template) {
        return template;
    }
};

var TemplateService = function TemplateService () {};

TemplateService.register = function register (userImplementation) {
    current = userImplementation;
};

TemplateService.compile = function compile (template) {
    return current.compile(template);
};

var FIELD_REGEX = /\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g;
var getterCache = {};
var UNDEFINED = 'undefined';

getterCache[UNDEFINED] = function(obj) {
    return obj;
};

function getter(field) {
    if (getterCache[field]) {
        return getterCache[field];
    }

    var fields = [];
    field.replace(FIELD_REGEX, function(match, index, indexAccessor, field) {
        fields.push(typeof index !== UNDEFINED ? index : (indexAccessor || field));
    });

    getterCache[field] = function(obj) {
        var result = obj;
        for (var idx = 0; idx < fields.length && result; idx++) {
            result = result[fields[idx]];
        }

        return result;
    };

    return getterCache[field];
}

function map(array, func) {
    return array.reduce(function (result, el, i) {
        var val = func(el, i);
        if (val != null) {
            result.push(val);
        }
        return result;
    }, []);
}

function defaultGroupHeaderTemplate(data) {
    return ((data.title) + ": " + (data.value));
}

function createArray(length, callback) {
    var result = [];

    for (var idx = 0; idx < length; idx++) {
        result.push(callback(idx));
    }

    return result;
}

var ExcelExporter = function ExcelExporter(options) {
    options.columns = this._trimColumns(options.columns || []);

    this.allColumns = map(this._leafColumns(options.columns || []), this._prepareColumn);

    this.columns = this.allColumns.filter(function(column) { return !column.hidden; });

    this.options = options;
    this.data = options.data || [];
    this.aggregates = options.aggregates || {};
    this.groups = [].concat(options.groups || []);
    this.hierarchy = options.hierarchy;
};

ExcelExporter.prototype.workbook = function workbook () {
    var workbook = {
        sheets: [ {
            columns: this._columns(),
            rows: this.hierarchy ? this._hierarchyRows() : this._rows(),
            freezePane: this._freezePane(),
            filter: this._filter()
        } ]
    };

    return workbook;
};

ExcelExporter.prototype._trimColumns = function _trimColumns (columns) {
        var this$1 = this;

    return columns.filter(function (column) {
        var result = Boolean(column.field);

        if (!result && column.columns) {
            result = this$1._trimColumns(column.columns).length > 0;
        }

        return result;
    });
};

ExcelExporter.prototype._leafColumns = function _leafColumns (columns) {
        var this$1 = this;

    var result = [];

    for (var idx = 0; idx < columns.length; idx++) {
        if (!columns[idx].columns) {
            result.push(columns[idx]);
        } else {
            result = result.concat(this$1._leafColumns(columns[idx].columns));
        }
    }

    return result;
};

ExcelExporter.prototype._prepareColumn = function _prepareColumn (column) {
    if (!column.field) {
        return null;
    }

    var value = function(dataItem) {
        return getter(column.field, true)(dataItem);
    };

    var values = null;

    if (column.values) {
        values = {};

        column.values.forEach(function(item) {
            values[item.value] = item.text;
        });

        value = function(dataItem) {
            return values[getter(column.field, true)(dataItem)];
        };
    }

    return Object.assign({}, column, {
        value: value,
        values: values,
        groupHeaderTemplate: column.groupHeaderTemplate ? TemplateService.compile(column.groupHeaderTemplate) : defaultGroupHeaderTemplate,
        groupFooterTemplate: column.groupFooterTemplate ? TemplateService.compile(column.groupFooterTemplate) : null,
        footerTemplate: column.footerTemplate ? TemplateService.compile(column.footerTemplate) : null
    });
};

ExcelExporter.prototype._filter = function _filter () {
    if (!this.options.filterable) {
        return null;
    }

    var depth = this._depth();

    return {
        from: depth,
        to: depth + this.columns.length - 1
    };
};

ExcelExporter.prototype._createPaddingCells = function _createPaddingCells (length) {
        var this$1 = this;

    return createArray(length, function () { return Object.assign({
        background: "#dfdfdf",
        color: "#333"
    }, this$1.options.paddingCellOptions); });
};

ExcelExporter.prototype._dataRow = function _dataRow (dataItem, level, depth) {
        var this$1 = this;

    var cells = this._createPaddingCells(level);

    // grouped
    if (depth && dataItem.items) {
        var column = this.allColumns.filter(function(column) {
            return column.field === dataItem.field;
        })[0];

        var title = column && column.title ? column.title : dataItem.field;
        var template = column ? column.groupHeaderTemplate : null;
        var group = Object.assign({
            title: title,
            field: dataItem.field,
            value: column && column.values ? column.values[dataItem.value] : dataItem.value,
            aggregates: dataItem.aggregates,
            items: dataItem.items
        }, dataItem.aggregates[dataItem.field]);

        var value = title + ": " + (dataItem.value);

        if (template) {
            value = template(group);
        }

        cells.push(Object.assign({
            value: value,
            background: "#dfdfdf",
            color: "#333",
            colSpan: this.columns.length + depth - level
        }, (column || {}).groupHeaderCellOptions));

        var rows = this._dataRows(dataItem.items, level + 1);

        rows.unshift({
            type: "group-header",
            cells: cells
        });

        return rows.concat(this._footer(dataItem));
    }

    var dataCells = [];

    for (var cellIdx = 0; cellIdx < this.columns.length; cellIdx++) {
        dataCells[cellIdx] = this$1._cell(dataItem, this$1.columns[cellIdx]);
    }

    if (this.hierarchy) {
        dataCells[0].colSpan = depth - level + 1;
    }

    return [ {
        type: "data",
        cells: cells.concat(dataCells)
    } ];
};

ExcelExporter.prototype._dataRows = function _dataRows (dataItems, level) {
        var this$1 = this;

    var depth = this._depth();
    var rows = [];

    for (var idx = 0; idx < dataItems.length; idx++) {
        rows.push.apply(rows, this$1._dataRow(dataItems[idx], level, depth));
    }

    return rows;
};

ExcelExporter.prototype._hierarchyRows = function _hierarchyRows () {
        var this$1 = this;

    var depth = this._depth();
    var data = this.data;
    var itemLevel = this.hierarchy.itemLevel;
    var hasFooter = this._hasFooterTemplate();
    var rows = [];
    var parents = [];
    var previousLevel = 0;
    var previousItemId;

    for (var idx = 0; idx < data.length; idx++) {
        var item = data[idx];
        var level = itemLevel(item);

        if (hasFooter) {
            if (level > previousLevel) {
                parents.push({ id: previousItemId, level: previousLevel });
            } else if (level < previousLevel) {
                rows.push.apply(rows, this$1._hierarchyFooterRows(parents, level, depth));
            }

            previousLevel = level;
            previousItemId = item.id;
        }

        rows.push.apply(rows, this$1._dataRow(item, level + 1, depth));
    }

    if (hasFooter) {
        rows.push.apply(rows, this._hierarchyFooterRows(parents, 0, depth));

        var rootAggregate = data.length ? this.aggregates[data[0].parentId] : {};
        rows.push(this._hierarchyFooter(rootAggregate, 0, depth));
    }

    this._prependHeaderRows(rows);

    return rows;
};

ExcelExporter.prototype._hierarchyFooterRows = function _hierarchyFooterRows (parents, currentLevel, depth) {
        var this$1 = this;

    var rows = [];
    while (parents.length && parents[parents.length - 1].level >= currentLevel) {
        var parent = parents.pop();
        rows.push(this$1._hierarchyFooter(this$1.aggregates[parent.id], parent.level + 1, depth));
    }

    return rows;
};

ExcelExporter.prototype._hasFooterTemplate = function _hasFooterTemplate () {
    var columns = this.columns;
    for (var idx = 0; idx < columns.length; idx++) {
        if (columns[idx].footerTemplate) {
            return true;
        }
    }
};

ExcelExporter.prototype._hierarchyFooter = function _hierarchyFooter (aggregates, level, depth) {
    var cells = this.columns.map(function(column, index) {
        var colSpan = index ? 1 : depth - level + 1;
        if (column.footerTemplate) {
            return Object.assign({
                background: "#dfdfdf",
                color: "#333",
                colSpan: colSpan,
                value: column.footerTemplate(Object.assign({}, (aggregates || {})[column.field]))
            }, column.footerCellOptions);
        }

        return Object.assign({
            background: "#dfdfdf",
            color: "#333",
            colSpan: colSpan
        }, column.footerCellOptions);
    });

    return {
        type: "footer",
        cells: this._createPaddingCells(level).concat(cells)
    };
};

ExcelExporter.prototype._footer = function _footer (dataItem) {
        var this$1 = this;

    var rows = [];
    var footer = false;

    var cells = this.columns.map(function (column) {
        if (column.groupFooterTemplate) {
            var templateData = Object.assign({}, this$1.aggregates, dataItem.aggregates, dataItem.aggregates[column.field], {
                group: {
                    items: dataItem.items,
                    field: dataItem.field,
                    value: dataItem.value
                }
            });

            // https://github.com/telerik/kendo-ui-core/issues/3024
            // https://github.com/telerik/kendo-ui-core/issues/3095
            templateData[dataItem.field] = templateData;

            footer = true;
            return Object.assign({
                background: "#dfdfdf",
                color: "#333",
                value: column.groupFooterTemplate(templateData)
            }, column.groupFooterCellOptions);
        }

        return Object.assign({
            background: "#dfdfdf",
            color: "#333"
        }, column.groupFooterCellOptions);
    });

    if (footer) {
        rows.push({
            type: "group-footer",
            cells: this._createPaddingCells(this.groups.length).concat(cells)
        });
    }

    return rows;
};

ExcelExporter.prototype._isColumnVisible = function _isColumnVisible (column) {
    return this._visibleColumns([ column ]).length > 0 && (column.field || column.columns);
};

ExcelExporter.prototype._visibleColumns = function _visibleColumns (columns) {
        var this$1 = this;

    return columns.filter(function (column) {
        var result = !column.hidden;
        if (result && column.columns) {
            result = this$1._visibleColumns(column.columns).length > 0;
        }
        return result;
    });
};

ExcelExporter.prototype._headerRow = function _headerRow (row, groups) {
        var this$1 = this;

    var headers = row.cells.map(function(cell) {
        return Object.assign(cell, {
            colSpan: cell.colSpan > 1 ? cell.colSpan : 1,
            rowSpan: row.rowSpan > 1 && !cell.colSpan ? row.rowSpan : 1
        });
    });

    if (this.hierarchy) {
        headers[0].colSpan = this._depth() + 1;
    }

    return {
        type: "header",
        cells: createArray(groups.length, function () { return Object.assign({
            background: "#7a7a7a",
            color: "#fff"
        }, this$1.options.headerPaddingCellOptions); }).concat(headers)
    };
};

ExcelExporter.prototype._prependHeaderRows = function _prependHeaderRows (rows) {
        var this$1 = this;

    var groups = this.groups;

    var headerRows = [ { rowSpan: 1, cells: [], index: 0 } ];

    this._prepareHeaderRows(headerRows, this.options.columns);

    for (var idx = headerRows.length - 1; idx >= 0; idx--) {
        rows.unshift(this$1._headerRow(headerRows[idx], groups));
    }
};

ExcelExporter.prototype._prepareHeaderRows = function _prepareHeaderRows (rows, columns, parentCell, parentRow) {
        var this$1 = this;

    var row = parentRow || rows[rows.length - 1];
    var childRow = rows[row.index + 1];
    var totalColSpan = 0;

    for (var idx = 0; idx < columns.length; idx++) {
        var column = columns[idx];
        if (this$1._isColumnVisible(column)) {

            var cell = Object.assign({
                background: "#7a7a7a",
                color: "#fff",
                value: column.title || column.field,
                colSpan: 0
            }, column.headerCellOptions);
            row.cells.push(cell);

            if (column.columns && column.columns.length) {
                if (!childRow) {
                    childRow = { rowSpan: 0, cells: [], index: rows.length };
                    rows.push(childRow);
                }
                cell.colSpan = this$1._trimColumns(this$1._visibleColumns(column.columns)).length;
                this$1._prepareHeaderRows(rows, column.columns, cell, childRow);
                totalColSpan += cell.colSpan - 1;
                row.rowSpan = rows.length - row.index;
            }
        }
    }

    if (parentCell) {
        parentCell.colSpan += totalColSpan;
    }
};

ExcelExporter.prototype._rows = function _rows () {
        var this$1 = this;

    var rows = this._dataRows(this.data, 0);

    if (this.columns.length) {
        this._prependHeaderRows(rows);
        var footer = false;

        var cells = this.columns.map(function (column) {
            if (column.footerTemplate) {
                footer = true;

                return Object.assign({
                    background: "#dfdfdf",
                    color: "#333",
                    value: column.footerTemplate(Object.assign({}, this$1.aggregates, this$1.aggregates[column.field]))
                }, column.footerCellOptions);
            }

            return Object.assign({
                background: "#dfdfdf",
                color: "#333"
            }, column.footerCellOptions);
        });

        if (footer) {
            rows.push({
                type: "footer",
                cells: this._createPaddingCells(this.groups.length).concat(cells)
            });
        }
    }

    return rows;
};

ExcelExporter.prototype._headerDepth = function _headerDepth (columns) {
        var this$1 = this;

    var result = 1;
    var max = 0;

    for (var idx = 0; idx < columns.length; idx++) {
        if (columns[idx].columns) {
            var temp = this$1._headerDepth(columns[idx].columns);
            if (temp > max) {
                max = temp;
            }
        }
    }
    return result + max;
};

ExcelExporter.prototype._freezePane = function _freezePane () {
    var columns = this._visibleColumns(this.options.columns || []);

    var colSplit = this._visibleColumns(this._trimColumns(this._leafColumns(columns.filter(function(column) {
        return column.locked;
    })))).length;

    return {
        rowSplit: this._headerDepth(columns),
        colSplit: colSplit ? colSplit + this.groups.length : 0
    };
};

ExcelExporter.prototype._cell = function _cell (dataItem, column) {
    return Object.assign({
        value: column.value(dataItem)
    }, column.cellOptions);
};

ExcelExporter.prototype._depth = function _depth () {
    var depth = 0;

    if (this.hierarchy) {
        depth = this.hierarchy.depth;
    } else {
        depth = this.groups.length;
    }

    return depth;
};

ExcelExporter.prototype._columns = function _columns () {
    var depth = this._depth();
    var columns = createArray(depth, function () { return ({ width: 20 }); });

    return columns.concat(this.columns.map(function(column) {
        return {
            width: parseInt(column.width, 10),
            autoWidth: column.width ? false : true
        };
    }));
};

var current$1 = {
    toString: function (value) { return value; }
};

var IntlService = function IntlService () {};

IntlService.register = function register (userImplementation) {
    current$1 = userImplementation;
};

IntlService.toString = function toString (value, format) {
    return current$1.toString(value, format);
};

function createZip() {
    return new JSZip();
}

var DATA_URL_PREFIX = "data:application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;base64,";
var DATA_URL_OPTIONS = { compression: "DEFLATE", type: "base64" };
var MS_PER_MINUTE = 60000;
var MS_PER_DAY = 86400000;

/* eslint-disable key-spacing, no-arrow-condition, indent, no-nested-ternary, consistent-return */

function toDataURI(content) {
    return DATA_URL_PREFIX + content;
}

function indexOf(thing, array) {
    return array.indexOf(thing);
}

var parseJSON = JSON.parse.bind(JSON);

function ESC(val) {
    return String(val)
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/\"/g, "&quot;")
        .replace(/\'/g, "&#39;");
}

function repeat(count, func) {
    var str = "";
    for (var i = 0; i < count; ++i) {
        str += func(i);
    }
    return str;
}

function foreach(arr, func) {
    var str = "";
    for (var i = 0; i < arr.length; ++i) {
        str += func(arr[i], i);
    }
    return str;
}

var XMLHEAD = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r';

var RELS = XMLHEAD + "\n            <Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n               <Relationship Id=\"rId3\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties\" Target=\"docProps/app.xml\"/>\n               <Relationship Id=\"rId2\" Type=\"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties\" Target=\"docProps/core.xml\"/>\n               <Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument\" Target=\"xl/workbook.xml\"/>\n            </Relationships>";

var CORE = function (ref) {
  var creator = ref.creator;
  var lastModifiedBy = ref.lastModifiedBy;
  var created = ref.created;
  var modified = ref.modified;

  return (XMLHEAD + "\n <cp:coreProperties xmlns:cp=\"http://schemas.openxmlformats.org/package/2006/metadata/core-properties\"\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:dcterms=\"http://purl.org/dc/terms/\"\n   xmlns:dcmitype=\"http://purl.org/dc/dcmitype/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\">\n   <dc:creator>" + (ESC(creator)) + "</dc:creator>\n   <cp:lastModifiedBy>" + (ESC(lastModifiedBy)) + "</cp:lastModifiedBy>\n   <dcterms:created xsi:type=\"dcterms:W3CDTF\">" + (ESC(created)) + "</dcterms:created>\n   <dcterms:modified xsi:type=\"dcterms:W3CDTF\">" + (ESC(modified)) + "</dcterms:modified>\n</cp:coreProperties>");
};

var APP = function (ref) {
  var sheets = ref.sheets;

  return (XMLHEAD + "\n<Properties xmlns=\"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties\" xmlns:vt=\"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes\">\n  <Application>Microsoft Excel</Application>\n  <DocSecurity>0</DocSecurity>\n  <ScaleCrop>false</ScaleCrop>\n  <HeadingPairs>\n    <vt:vector size=\"2\" baseType=\"variant\">\n      <vt:variant>\n        <vt:lpstr>Worksheets</vt:lpstr>\n      </vt:variant>\n      <vt:variant>\n        <vt:i4>" + (sheets.length) + "</vt:i4>\n      </vt:variant>\n    </vt:vector>\n  </HeadingPairs>\n  <TitlesOfParts>\n    <vt:vector size=\"" + (sheets.length) + "\" baseType=\"lpstr\">" + (foreach(sheets, function (sheet, i) { return sheet.options.title
          ? ("<vt:lpstr>" + (ESC(sheet.options.title)) + "</vt:lpstr>")
          : ("<vt:lpstr>Sheet" + (i + 1) + "</vt:lpstr>"); }
      )) + "</vt:vector>\n  </TitlesOfParts>\n  <LinksUpToDate>false</LinksUpToDate>\n  <SharedDoc>false</SharedDoc>\n  <HyperlinksChanged>false</HyperlinksChanged>\n  <AppVersion>14.0300</AppVersion>\n</Properties>");
};

var CONTENT_TYPES = function (ref) {
  var count = ref.count;

  return (XMLHEAD + "\n<Types xmlns=\"http://schemas.openxmlformats.org/package/2006/content-types\">\n  <Default Extension=\"rels\" ContentType=\"application/vnd.openxmlformats-package.relationships+xml\" />\n  <Default Extension=\"xml\" ContentType=\"application/xml\" />\n  <Override PartName=\"/xl/workbook.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml\" />\n  <Override PartName=\"/xl/styles.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml\"/>\n  <Override PartName=\"/xl/sharedStrings.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml\"/>\n  " + (repeat(count, function (idx) { return ("<Override PartName=\"/xl/worksheets/sheet" + (idx + 1) + ".xml\" ContentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml\" />"); })) + "\n  <Override PartName=\"/docProps/core.xml\" ContentType=\"application/vnd.openxmlformats-package.core-properties+xml\" />\n  <Override PartName=\"/docProps/app.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.extended-properties+xml\" />\n</Types>");
};

var WORKBOOK = function (ref) {
  var sheets = ref.sheets;
  var filterNames = ref.filterNames;
  var userNames = ref.userNames;

  return (XMLHEAD + "\n<workbook xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\">\n  <fileVersion appName=\"xl\" lastEdited=\"5\" lowestEdited=\"5\" rupBuild=\"9303\" />\n  <workbookPr defaultThemeVersion=\"124226\" />\n  <bookViews>\n    <workbookView xWindow=\"240\" yWindow=\"45\" windowWidth=\"18195\" windowHeight=\"7995\" />\n  </bookViews>\n  <sheets>\n  " + (foreach(sheets, function (ref, i) {
    var options = ref.options;

    var name = options.name || options.title || ("Sheet" + (i + 1));
    return ("<sheet name=\"" + (ESC(name)) + "\" sheetId=\"" + (i + 1) + "\" r:id=\"rId" + (i + 1) + "\" />");
  })) + "\n  </sheets>\n  " + (filterNames.length || userNames.length ? ("\n    <definedNames>\n      " + (foreach(filterNames, function (f) { return ("\n         <definedName name=\"_xlnm._FilterDatabase\" hidden=\"1\" localSheetId=\"" + (f.localSheetId) + "\">" + (ESC(f.name)) + "!" + (ESC(f.from)) + ":" + (ESC(f.to)) + "</definedName>"); })) + "\n      " + (foreach(userNames, function (f) { return ("\n         <definedName name=\"" + (f.name) + "\" hidden=\"" + (f.hidden ? 1 : 0) + "\" " + (f.localSheetId != null ? ("localSheetId=\"" + (f.localSheetId) + "\"") : '') + ">" + (ESC(f.value)) + "</definedName>"); })) + "\n    </definedNames>") : '') + "\n  <calcPr fullCalcOnLoad=\"1\" calcId=\"145621\" />\n</workbook>");
};

var WORKSHEET = function (ref) {
  var frozenColumns = ref.frozenColumns;
  var frozenRows = ref.frozenRows;
  var columns = ref.columns;
  var defaults = ref.defaults;
  var data = ref.data;
  var index = ref.index;
  var mergeCells = ref.mergeCells;
  var autoFilter = ref.autoFilter;
  var filter = ref.filter;
  var showGridLines = ref.showGridLines;
  var hyperlinks = ref.hyperlinks;
  var validations = ref.validations;
  var defaultCellStyleId = ref.defaultCellStyleId;
  var rtl = ref.rtl;

  return (XMLHEAD + "\n<worksheet xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\" mc:Ignorable=\"x14ac\">\n   <dimension ref=\"A1\" />\n\n   <sheetViews>\n     <sheetView " + (rtl ? 'rightToLeft="1"' : '') + " " + (index === 0 ? 'tabSelected="1"' : '') + " workbookViewId=\"0\" " + (showGridLines === false ? 'showGridLines="0"' : '') + ">\n     " + (frozenRows || frozenColumns ? ("\n       <pane state=\"frozen\"\n         " + (frozenColumns ? ("xSplit=\"" + frozenColumns + "\"") : '') + "\n         " + (frozenRows ? ("ySplit=\"" + frozenRows + "\"") : '') + "\n         topLeftCell=\"" + (String.fromCharCode(65 + (frozenColumns || 0)) + ((frozenRows || 0) + 1)) + "\"\n       />") : '') + "\n     </sheetView>\n   </sheetViews>\n\n   <sheetFormatPr x14ac:dyDescent=\"0.25\" defaultRowHeight=\"" + (defaults.rowHeight ? defaults.rowHeight * 0.75 : 15) + "\"\n     " + (defaults.columnWidth ? ("defaultColWidth=\"" + (toWidth(defaults.columnWidth)) + "\"") : '') + " />\n\n   " + (defaultCellStyleId != null || (columns && columns.length > 0) ? ("\n     <cols>\n       " + (!columns || !columns.length ? ("\n         <col min=\"1\" max=\"16384\" style=\"" + defaultCellStyleId + "\"\n              " + (defaults.columnWidth ? ("width=\"" + (toWidth(defaults.columnWidth)) + "\"") : '') + " /> ") : '') + "\n       " + (foreach(columns, function (column, ci) {
         var columnIndex = typeof column.index === "number" ? column.index + 1 : (ci + 1);
         if (column.width === 0) {
           return ("<col " + (defaultCellStyleId != null ? ("style=\"" + defaultCellStyleId + "\"") : '') + "\n                        min=\"" + columnIndex + "\" max=\"" + columnIndex + "\" hidden=\"1\" customWidth=\"1\" />");
         }
         return ("<col " + (defaultCellStyleId != null ? ("style=\"" + defaultCellStyleId + "\"") : '') + "\n                      min=\"" + columnIndex + "\" max=\"" + columnIndex + "\" customWidth=\"1\"\n                      " + (column.autoWidth
                          ? ("width=\"" + (((column.width * 7 + 5) / 7 * 256) / 256) + "\" bestFit=\"1\"")
                          : ("width=\"" + (toWidth(column.width)) + "\"")) + " />");
       })) + "\n     </cols>") : '') + "\n\n   <sheetData>\n     " + (foreach(data, function (row, ri) {
       var rowIndex = typeof row.index === "number" ? row.index + 1 : (ri + 1);
       return ("\n         <row r=\"" + rowIndex + "\" x14ac:dyDescent=\"0.25\"\n              " + (row.height === 0 ? 'hidden="1"'
                                 : row.height ? ("ht=\"" + (toHeight(row.height)) + "\" customHeight=\"1\"") : "") + ">\n           " + (foreach(row.data, function (cell) { return ("\n             <c r=\"" + (cell.ref) + "\" " + (cell.style ? ("s=\"" + (cell.style) + "\"") : '') + " " + (cell.type ? ("t=\"" + (cell.type) + "\"") : '') + ">\n               " + (cell.formula != null ? writeFormula(cell.formula) : '') + "\n               " + (cell.value != null ? ("<v>" + (ESC(cell.value)) + "</v>") : '') + "\n             </c>"); })) + "\n         </row>\n       ");})) + "\n   </sheetData>\n\n   " + (autoFilter ? ("<autoFilter ref=\"" + (autoFilter.from) + ":" + (autoFilter.to) + "\"/>")
                : filter ? spreadsheetFilters(filter) : '') + "\n\n   " + (mergeCells.length ? ("\n     <mergeCells count=\"" + (mergeCells.length) + "\">\n       " + (foreach(mergeCells, function (ref) { return ("<mergeCell ref=\"" + ref + "\"/>"); })) + "\n     </mergeCells>") : '') + "\n\n   " + (validations.length ? ("\n     <dataValidations>\n       " + (foreach(validations, function (val) { return ("\n         <dataValidation sqref=\"" + (val.sqref.join(" ")) + "\"\n                         showErrorMessage=\"" + (val.showErrorMessage) + "\"\n                         type=\"" + (ESC(val.type)) + "\"\n                         " + (val.type !== "list" ? ("operator=\"" + (ESC(val.operator)) + "\"") : '') + "\n                         allowBlank=\"" + (val.allowBlank) + "\"\n                         showDropDown=\"" + (val.showDropDown) + "\"\n                         " + (val.error ? ("error=\"" + (ESC(val.error)) + "\"") : '') + "\n                         " + (val.errorTitle ? ("errorTitle=\"" + (ESC(val.errorTitle)) + "\"") : '') + ">\n           " + (val.formula1 ? ("<formula1>" + (ESC(val.formula1)) + "</formula1>") : '') + "\n           " + (val.formula2 ? ("<formula2>" + (ESC(val.formula2)) + "</formula2>") : '') + "\n         </dataValidation>"); })) + "\n     </dataValidations>") : '') + "\n\n   " + (hyperlinks.length ? ("\n     <hyperlinks>\n       " + (foreach(hyperlinks, function (link, hi) { return ("\n         <hyperlink ref=\"" + (link.ref) + "\" r:id=\"rId" + hi + "\"/>"); })) + "\n     </hyperlinks>") : '') + "\n\n   <pageMargins left=\"0.7\" right=\"0.7\" top=\"0.75\" bottom=\"0.75\" header=\"0.3\" footer=\"0.3\" />\n</worksheet>");
};

var WORKBOOK_RELS = function (ref) {
  var count = ref.count;

  return (XMLHEAD + "\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n  " + (repeat(count, function (idx) { return ("\n    <Relationship Id=\"rId" + (idx + 1) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet\" Target=\"worksheets/sheet" + (idx + 1) + ".xml\" />"); })) + "\n  <Relationship Id=\"rId" + (count + 1) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles\" Target=\"styles.xml\" />\n  <Relationship Id=\"rId" + (count + 2) + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings\" Target=\"sharedStrings.xml\" />\n</Relationships>");
};

var WORKSHEET_RELS = function (ref) {
  var hyperlinks = ref.hyperlinks;

  return (XMLHEAD + "\n<Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\">\n  " + (foreach(hyperlinks, function (link, i) { return ("\n    <Relationship Id=\"rId" + i + "\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\" Target=\"" + (ESC(link.target)) + "\" TargetMode=\"External\" />"); })) + "\n</Relationships>");
};

var SHARED_STRINGS = function (ref) {
  var count = ref.count;
  var uniqueCount = ref.uniqueCount;
  var indexes = ref.indexes;

  return (XMLHEAD + "\n<sst xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\" count=\"" + count + "\" uniqueCount=\"" + uniqueCount + "\">\n  " + (foreach(Object.keys(indexes), function (index) { return ("\n    <si><t xml:space=\"preserve\">" + (ESC(index.substring(1))) + "</t></si>"); })) + "\n</sst>");
};

var STYLES = function (ref) {
  var formats = ref.formats;
  var fonts = ref.fonts;
  var fills = ref.fills;
  var borders = ref.borders;
  var styles = ref.styles;

  return (XMLHEAD + "\n<styleSheet\n    xmlns=\"http://schemas.openxmlformats.org/spreadsheetml/2006/main\"\n    xmlns:mc=\"http://schemas.openxmlformats.org/markup-compatibility/2006\"\n    mc:Ignorable=\"x14ac\"\n    xmlns:x14ac=\"http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac\">\n  <numFmts count=\"" + (formats.length) + "\">\n  " + (foreach(formats, function (format, fi) { return ("\n    <numFmt formatCode=\"" + (ESC(format.format)) + "\" numFmtId=\"" + (165 + fi) + "\" />"); })) + "\n  </numFmts>\n  <fonts count=\"" + (fonts.length + 1) + "\" x14ac:knownFonts=\"1\">\n    <font>\n       <sz val=\"11\" />\n       <color theme=\"1\" />\n       <name val=\"Calibri\" />\n       <family val=\"2\" />\n       <scheme val=\"minor\" />\n    </font>\n    " + (foreach(fonts, function (font) { return ("\n    <font>\n      <sz val=\"" + (font.fontSize || 11) + "\" />\n      " + (font.bold ? '<b/>' : '') + "\n      " + (font.italic ? '<i/>' : '') + "\n      " + (font.underline ? '<u/>' : '') + "\n      " + (font.color ? ("<color rgb=\"" + (ESC(font.color)) + "\" />") : '<color theme="1" />') + "\n      " + (font.fontFamily ? ("\n        <name val=\"" + (ESC(font.fontFamily)) + "\" />\n        <family val=\"2\" />\n      ") : "\n        <name val=\"Calibri\" />\n        <family val=\"2\" />\n        <scheme val=\"minor\" />\n      ") + "\n    </font>"); })) + "\n  </fonts>\n  <fills count=\"" + (fills.length + 2) + "\">\n      <fill><patternFill patternType=\"none\"/></fill>\n      <fill><patternFill patternType=\"gray125\"/></fill>\n    " + (foreach(fills, function (fill) { return ("\n      " + (fill.background ? ("\n        <fill>\n          <patternFill patternType=\"solid\">\n              <fgColor rgb=\"" + (ESC(fill.background)) + "\"/>\n          </patternFill>\n        </fill>\n      ") : '')); })) + "\n  </fills>\n  <borders count=\"" + (borders.length + 1) + "\">\n    <border><left/><right/><top/><bottom/><diagonal/></border>\n    " + (foreach(borders, borderTemplate)) + "\n  </borders>\n  <cellStyleXfs count=\"1\">\n    <xf borderId=\"0\" fillId=\"0\" fontId=\"0\" />\n  </cellStyleXfs>\n  <cellXfs count=\"" + (styles.length + 1) + "\">\n    <xf numFmtId=\"0\" fontId=\"0\" fillId=\"0\" borderId=\"0\" xfId=\"0\" />\n    " + (foreach(styles, function (style) { return ("\n      <xf xfId=\"0\"\n          " + (style.fontId ? ("fontId=\"" + (style.fontId) + "\" applyFont=\"1\"") : '') + "\n          " + (style.fillId ? ("fillId=\"" + (style.fillId) + "\" applyFill=\"1\"") : '') + "\n          " + (style.numFmtId ? ("numFmtId=\"" + (style.numFmtId) + "\" applyNumberFormat=\"1\"") : '') + "\n          " + (style.textAlign || style.verticalAlign || style.wrap ? 'applyAlignment="1"' : '') + "\n          " + (style.borderId ? ("borderId=\"" + (style.borderId) + "\" applyBorder=\"1\"") : '') + ">\n        " + (style.textAlign || style.verticalAlign || style.wrap ? ("\n        <alignment\n          " + (style.textAlign ? ("horizontal=\"" + (ESC(style.textAlign)) + "\"") : '') + "\n          " + (style.verticalAlign ? ("vertical=\"" + (ESC(style.verticalAlign)) + "\"") : '') + "\n          " + (style.wrap ? 'wrapText="1"' : '') + " />\n        ") : '') + "\n      </xf>\n    "); })) + "\n  </cellXfs>\n  <cellStyles count=\"1\">\n    <cellStyle name=\"Normal\" xfId=\"0\" builtinId=\"0\"/>\n  </cellStyles>\n  <dxfs count=\"0\" />\n  <tableStyles count=\"0\" defaultTableStyle=\"TableStyleMedium2\" defaultPivotStyle=\"PivotStyleMedium9\" />\n</styleSheet>");
};

function writeFormula(formula) {
    if (typeof formula == "string") {
        return ("<f>" + (ESC(formula)) + "</f>");
    }
    // array formulas
    return ("<f t=\"array\" ref=\"" + (formula.ref) + "\">" + (ESC(formula.src)) + "</f>");
}

function numChar(colIndex) {
   var letter = Math.floor(colIndex / 26) - 1;

   return (letter >= 0 ? numChar(letter) : "") + String.fromCharCode(65 + (colIndex % 26));
}

function ref(rowIndex, colIndex) {
    return numChar(colIndex) + (rowIndex + 1);
}

function $ref(rowIndex, colIndex) {
    return "$" + numChar(colIndex) + "$" + (rowIndex + 1);
}

function filterRowIndex(options) {
    var frozenRows = options.frozenRows || (options.freezePane || {}).rowSplit || 1;
    return frozenRows - 1;
}

function toWidth(px) {
    return ((px / 7) * 100 + 0.5) / 100;
}

function toHeight(px) {
    return px * 0.75;
}

function stripFunnyChars(value) {
    return String(value)
        .replace(/[\x00-\x1F]/g, "")
        .replace(/\n/g, "\r\n");
}

var DATE_EPOCH = new Date(1900, 0, 0);

var Worksheet = function Worksheet(options, sharedStrings, styles, borders) {
      this.options = options;
      this._strings = sharedStrings;
      this._styles = styles;
      this._borders = borders;
      this._validations = {};
  };

  Worksheet.prototype.relsToXML = function relsToXML () {
      var hyperlinks = this.options.hyperlinks || [];
      if (!hyperlinks.length) {
          return "";
      }

      return WORKSHEET_RELS({ hyperlinks: hyperlinks });
  };

  Worksheet.prototype.toXML = function toXML (index) {
        var this$1 = this;

      var mergeCells = this.options.mergedCells || [];
      var rows = this.options.rows || [];
      var data = inflate(rows, mergeCells);

      this._readCells(data);

      var autoFilter = this.options.filter;
      var filter;
      if (autoFilter && (typeof autoFilter.from === "number") && (typeof autoFilter.to === "number")) {
          // Grid enables auto filter
          autoFilter = {
              from: ref(filterRowIndex(this.options), autoFilter.from),
              to: ref(filterRowIndex(this.options), autoFilter.to)
          };
      } else if (autoFilter && autoFilter.ref && autoFilter.columns) {
          // this is probably from the Spreadsheet
          filter = autoFilter;
          autoFilter = null;
      }

      var validations = [];
      for (var i in this._validations) {
          if (Object.prototype.hasOwnProperty.call(this$1._validations, i)) {
              validations.push(this$1._validations[i]);
          }
      }

      var defaultCellStyleId = null;
      if (this.options.defaultCellStyle) {
          defaultCellStyleId = this._lookupStyle(this.options.defaultCellStyle);
      }

      var freezePane = this.options.freezePane || {};
      var defaults = this.options.defaults || {};
      return WORKSHEET({
          frozenColumns: this.options.frozenColumns || freezePane.colSplit,
          frozenRows: this.options.frozenRows || freezePane.rowSplit,
          columns: this.options.columns,
          defaults: defaults,
          data: data,
          index: index,
          mergeCells: mergeCells,
          autoFilter: autoFilter,
          filter: filter,
          showGridLines: this.options.showGridLines,
          hyperlinks: this.options.hyperlinks || [],
          validations: validations,
          defaultCellStyleId: defaultCellStyleId,
          rtl: this.options.rtl !== undefined ? this.options.rtl : defaults.rtl
      });
  };

    Worksheet.prototype._lookupString = function _lookupString (value) {
        var key = "$" + value;
        var index = this._strings.indexes[key];
        var result;

        if (index !== undefined) {
            result = index;
        } else {
            result = this._strings.indexes[key] = this._strings.uniqueCount;
            this._strings.uniqueCount ++;
        }

        this._strings.count ++;

        return result;
    };

    Worksheet.prototype._lookupStyle = function _lookupStyle (style) {
        var json = JSON.stringify(style);

        if (json === "{}") {
            return 0;
        }

        var index = indexOf(json, this._styles);

        if (index < 0) {
          index = this._styles.push(json) - 1;
      }

      // There is one default style
      return index + 1;
  };

  Worksheet.prototype._lookupBorder = function _lookupBorder (border) {
      var json = JSON.stringify(border);
      if (json === "{}") {
          return;
      }

      var index = indexOf(json, this._borders);
      if (index < 0) {
          index = this._borders.push(json) - 1;
      }

      // There is one default border
      return index + 1;
  };

  Worksheet.prototype._readCells = function _readCells (rowData) {
        var this$1 = this;

      for (var i = 0; i < rowData.length; i++) {
          var row = rowData[i];
          var cells = row.cells;

          row.data = [];

          for (var j = 0; j < cells.length; j++) {
              var cellData = this$1._cell(cells[j], row.index, j);
                if (cellData) {
                    row.data.push(cellData);
                }
            }
        }
    };

    Worksheet.prototype._cell = function _cell (data, rowIndex, cellIndex) {
        if (!data || data === EMPTY_CELL) {
            return null;
        }

        var value = data.value;

        var border = {};

      if (data.borderLeft) {
          border.left = data.borderLeft;
      }

      if (data.borderRight) {
          border.right = data.borderRight;
      }

      if (data.borderTop) {
          border.top = data.borderTop;
      }

      if (data.borderBottom) {
          border.bottom = data.borderBottom;
        }

        border = this._lookupBorder(border);

      var defStyle = this.options.defaultCellStyle || {};
        var style = { borderId: border };

        (function(add) {
          add("color");
          add("background");
          add("bold");
            add("italic");
            add("underline");
            if (!add("fontFamily")) { add("fontName", "fontFamily"); }
          add("fontSize");
          add("format");
            if (!add("textAlign")) { add("hAlign", "textAlign"); }
          if (!add("verticalAlign")) { add("vAlign", "verticalAlign"); }
          add("wrap");
        })(
            function(prop, target) {
                var val = data[prop];
                if (val === undefined) {
                    val = defStyle[prop];
                }
                if (val !== undefined) {
                    style[target || prop] = val;
                    return true;
                }
            }
        );

        var columns = this.options.columns || [];

        var column = columns[cellIndex];
      var type = typeof value;

      if (column && column.autoWidth) {
          var displayValue = value;

          // XXX: let's not bring kendo.toString in only for this.
          //    better wait until the spreadsheet engine is available as a separate
          //    component, then we can use a real Excel-like formatter.
          //
          if (type === "number") {
              // kendo.toString will not behave exactly like the Excel format
                // Still, it's the best we have available for estimating the character count.
              displayValue = IntlService.toString(value, data.format);
          }

          column.width = Math.max(column.width || 0, String(displayValue).length);
      }

      if (type === "string") {
          value = stripFunnyChars(value);
          value = this._lookupString(value);
          type = "s";
      } else if (type === "number") {
          type = "n";
      } else if (type === "boolean") {
          type = "b";
            value = Number(value);
      } else if (value && value.getTime) {
          type = null;

            var offset = (value.getTimezoneOffset() - DATE_EPOCH.getTimezoneOffset()) * MS_PER_MINUTE;
            value = (value - DATE_EPOCH - offset) / MS_PER_DAY + 1;

            if (!style.format) {
              style.format = "mm-dd-yy";
          }
      } else {
          type = null;
          value = null;
      }

      style = this._lookupStyle(style);

      var cellName = ref(rowIndex, cellIndex);

      if (data.validation) {
          this._addValidation(data.validation, cellName);
        }

        return {
            value: value,
            formula: data.formula,
            type: type,
            style: style,
            ref: cellName
        };
    };

    Worksheet.prototype._addValidation = function _addValidation (v, ref) {
        var tmp = {
            showErrorMessage : v.type === "reject" ? 1 : 0,
            formula1         : v.from,
            formula2         : v.to,
            type             : MAP_EXCEL_TYPE[v.dataType] || v.dataType,
            operator         : MAP_EXCEL_OPERATOR[v.comparerType] || v.comparerType,
            allowBlank       : v.allowNulls ? 1 : 0,
            showDropDown     : v.showButton ? 0 : 1, // LOL, Excel!
          error          : v.messageTemplate,
          errorTitle     : v.titleTemplate
      };
      var json = JSON.stringify(tmp);
      if (!this._validations[json]) {
          this._validations[json] = tmp;
          tmp.sqref = [];
      }
      this._validations[json].sqref.push(ref);
  };

var MAP_EXCEL_OPERATOR = {
    // includes only what differs; key is our operator, value is Excel
    // operator.
    greaterThanOrEqualTo : "greaterThanOrEqual",
    lessThanOrEqualTo    : "lessThanOrEqual"
};

var MAP_EXCEL_TYPE = {
    number: "decimal"
};

var defaultFormats = {
    "General": 0,
    "0": 1,
    "0.00": 2,
    "#,##0": 3,
    "#,##0.00": 4,
    "0%": 9,
    "0.00%": 10,
    "0.00E+00": 11,
    "# ?/?": 12,
    "# ??/??": 13,
    "mm-dd-yy": 14,
    "d-mmm-yy": 15,
    "d-mmm": 16,
    "mmm-yy": 17,
    "h:mm AM/PM": 18,
    "h:mm:ss AM/PM": 19,
    "h:mm": 20,
    "h:mm:ss": 21,
    "m/d/yy h:mm": 22,
    "#,##0 ;(#,##0)": 37,
    "#,##0 ;[Red](#,##0)": 38,
    "#,##0.00;(#,##0.00)": 39,
    "#,##0.00;[Red](#,##0.00)": 40,
    "mm:ss": 45,
    "[h]:mm:ss": 46,
    "mmss.0": 47,
    "##0.0E+0": 48,
    "@": 49,
    "[$-404]e/m/d": 27,
    "m/d/yy": 30,
    "t0": 59,
    "t0.00": 60,
    "t#,##0": 61,
    "t#,##0.00": 62,
    "t0%": 67,
    "t0.00%": 68,
    "t# ?/?": 69,
    "t# ??/??": 70
};

function convertColor(value) {
    var color = value;
    if (color.length < 6) {
        color = color.replace(/(\w)/g, function($0, $1) {
            return $1 + $1;
        });
    }

    color = color.substring(1).toUpperCase();

    if (color.length < 8) {
        color = "FF" + color;
    }

    return color;
}

var Workbook = function Workbook(options) {
      var this$1 = this;

      this.options = options || {};
      this._strings = {
          indexes: {},
          count: 0,
          uniqueCount: 0
      };
      this._styles = [];
      this._borders = [];

      this._sheets = map(this.options.sheets || [], function (options) {
          options.defaults = this$1.options;
          return new Worksheet(options, this$1._strings, this$1._styles, this$1._borders);
      });
  };

  Workbook.prototype.toZIP = function toZIP () {
        var this$1 = this;

      var zip = createZip();

      var docProps = zip.folder("docProps");

      docProps.file("core.xml", CORE({
          creator: this.options.creator || "Kendo UI",
          lastModifiedBy: this.options.creator || "Kendo UI",
          created: this.options.date || new Date().toJSON(),
          modified: this.options.date || new Date().toJSON()
      }));

      var sheetCount = this._sheets.length;

      docProps.file("app.xml", APP({ sheets: this._sheets }));

      var rels = zip.folder("_rels");
      rels.file(".rels", RELS);

      var xl = zip.folder("xl");

      var xlRels = xl.folder("_rels");
      xlRels.file("workbook.xml.rels", WORKBOOK_RELS({ count: sheetCount }));

      var sheetIds = {};

      xl.file("workbook.xml", WORKBOOK({
          sheets: this._sheets,
          filterNames: map(this._sheets, function(sheet, index) {
              var options = sheet.options;
              var sheetName = (options.name || options.title || "Sheet" + (index + 1));
              sheetIds[sheetName.toLowerCase()] = index;
              var filter = options.filter;
              if (filter) {
                  if (filter.ref) {
                      // spreadsheet provides `ref`
                      var a = filter.ref.split(":");
                      var from = parseRef(a[0]);
                      var to = parseRef(a[1]);
                      return {
                          localSheetId: index,
                          name: sheetName,
                          from: $ref(from.row, from.col),
                          to: $ref(to.row, to.col)
                      };
                  } else if (typeof filter.from !== "undefined" && typeof filter.to !== "undefined") {
                      // grid does this
                      return {
                          localSheetId: index,
                          name: sheetName,
                          from: $ref(filterRowIndex(options), filter.from),
                            to: $ref(filterRowIndex(options), filter.to)
                        };
                    }
                }
            }),
            userNames: map(this.options.names || [], function(def) {
                return {
                    name: def.localName,
                    localSheetId: def.sheet ? sheetIds[def.sheet.toLowerCase()] : null,
                    value: def.value,
                    hidden: def.hidden
                };
            })
        }));

        var worksheets = xl.folder("worksheets");

      var sheetRels = worksheets.folder("_rels");

      for (var idx = 0; idx < sheetCount; idx++) {
          var sheet = this$1._sheets[idx];
          var sheetName = "sheet" + (idx + 1) + ".xml";
          var relsXml = sheet.relsToXML();

          if (relsXml) {
              sheetRels.file(sheetName + ".rels", relsXml);
          }

          worksheets.file(sheetName, sheet.toXML(idx));
      }

      var borders = map(this._borders, parseJSON);

      var styles = map(this._styles, parseJSON);

      var hasFont = function(style) {
          return style.underline || style.bold || style.italic || style.color || style.fontFamily || style.fontSize;
      };

      var fonts = map(styles, function(style) {
            if (style.color) {
                style.color = convertColor(style.color);
            }

            if (hasFont(style)) {
                return style;
            }
        });

        var formats = map(styles, function(style) {
            if (style.format && defaultFormats[style.format] === undefined) {
              return style;
          }
      });

      var fills = map(styles, function(style) {
          if (style.background) {
              style.background = convertColor(style.background);
              return style;
          }
      });

      xl.file("styles.xml", STYLES({
          fonts: fonts,
            fills: fills,
          formats: formats,
          borders: borders,
          styles: map(styles, function(style) {
                var result = {};

              if (hasFont(style)) {
                  result.fontId = indexOf(style, fonts) + 1;
                }

                if (style.background) {
                  result.fillId = indexOf(style, fills) + 2;
              }

              result.textAlign = style.textAlign;
              result.verticalAlign = style.verticalAlign;
              result.wrap = style.wrap;
              result.borderId = style.borderId;

                if (style.format) {
                    if (defaultFormats[style.format] !== undefined) {
                        result.numFmtId = defaultFormats[style.format];
                    } else {
                        result.numFmtId = 165 + indexOf(style, formats);
                    }
                }

                return result;
            })
        }));

        xl.file("sharedStrings.xml", SHARED_STRINGS(this._strings));

      zip.file("[Content_Types].xml", CONTENT_TYPES( { count: sheetCount }));

      return zip;
  };

  Workbook.prototype.toDataURL = function toDataURL () {
      var zip = this.toZIP();

      return zip.generateAsync ? zip.generateAsync(DATA_URL_OPTIONS).then(toDataURI) : toDataURI(zip.generate(DATA_URL_OPTIONS));
  };

function borderStyle(width) {
    var alias = "thin";

    if (width === 2) {
        alias = "medium";
    } else if (width === 3) {
        alias = "thick";
    }

    return alias;
}

function borderSideTemplate(name, style) {
    var result = "";

    if (style) {
        result += "<" + name + " style=\"" + borderStyle(style.size) + "\">";
        if (style.color) {
            result += "<color rgb=\"" + convertColor(style.color) + "\"/>";
        }
        result += "</" + name + ">";
    }

    return result;
}

function borderTemplate(border) {
    return "<border>" +
       borderSideTemplate("left", border.left) +
       borderSideTemplate("right", border.right) +
       borderSideTemplate("top", border.top) +
       borderSideTemplate("bottom", border.bottom) +
   "</border>";
}

var EMPTY_CELL = {};
function inflate(rows, mergedCells) {
    var rowData = [];
    var rowsByIndex = [];

    indexRows(rows, function(row, index) {
        var data = {
            _source: row,
            index: index,
            height: row.height,
            cells: []
        };

        rowData.push(data);
        rowsByIndex[index] = data;
    });

    var sorted = sortByIndex(rowData).slice(0);
    var ctx = {
        rowData: rowData,
        rowsByIndex: rowsByIndex,
        mergedCells: mergedCells
    };

    for (var i = 0; i < sorted.length; i++) {
        fillCells(sorted[i], ctx);
        delete sorted[i]._source;
    }

    return sortByIndex(rowData);
}

function indexRows(rows, callback) {
    for (var i = 0; i < rows.length; i++) {
        var row = rows[i];
        if (!row) {
            continue;
        }

        var index = row.index;
        if (typeof index !== "number") {
            index = i;
        }

        callback(row, index);
    }
}

function sortByIndex(items) {
    return items.sort(function(a, b) {
        return a.index - b.index;
    });
}

function pushUnique(array, el) {
    if (array.indexOf(el) < 0) {
        array.push(el);
    }
}

function getSpan(mergedCells, ref) {
    for (var i = 0; i < mergedCells.length; ++i) {
        var range = mergedCells[i];
        var a = range.split(":");
        var topLeft = a[0];
        if (topLeft === ref) {
            var bottomRight = a[1];
            topLeft = parseRef(topLeft);
            bottomRight = parseRef(bottomRight);
            return {
                rowSpan: bottomRight.row - topLeft.row + 1,
                colSpan: bottomRight.col - topLeft.col + 1
            };
        }
    }
}

function parseRef(ref) {
    function getcol(str) {
        var upperStr = str.toUpperCase();
        var col = 0;
        for (var i = 0; i < upperStr.length; ++i) {
            col = col * 26 + upperStr.charCodeAt(i) - 64;
        }
        return col - 1;
    }

    function getrow(str) {
        return parseInt(str, 10) - 1;
    }

    var m = /^([a-z]+)(\d+)$/i.exec(ref);
    return {
        row: getrow(m[2]),
        col: getcol(m[1])
    };
}

function fillCells(data, ctx) {
    var row = data._source;
    var rowIndex = data.index;
    var cells = row.cells;
    var cellData = data.cells;

    if (!cells) {
        return;
    }

    for (var i = 0; i < cells.length; i++) {
        var cell = cells[i] || EMPTY_CELL;

        var rowSpan = cell.rowSpan || 1;
        var colSpan = cell.colSpan || 1;

        var cellIndex = insertCell(cellData, cell);
        var topLeftRef = ref(rowIndex, cellIndex);

        if (rowSpan === 1 && colSpan === 1) {
            // could still be merged: the spreadsheet does not send
            // rowSpan/colSpan, but mergedCells is already populated.
            // https://github.com/telerik/kendo-ui-core/issues/2401
            var tmp = getSpan(ctx.mergedCells, topLeftRef);
            if (tmp) {
                colSpan = tmp.colSpan;
                rowSpan = tmp.rowSpan;
            }
        }

        spanCell(cell, cellData, cellIndex, colSpan);

        if (rowSpan > 1 || colSpan > 1) {
            pushUnique(ctx.mergedCells,
                       topLeftRef + ":" + ref(rowIndex + rowSpan - 1,
                                              cellIndex + colSpan - 1));
        }

        if (rowSpan > 1) {
            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {
                var nextRow = ctx.rowsByIndex[ri];
                if (!nextRow) {
                    nextRow = ctx.rowsByIndex[ri] = { index: ri, cells: [] };
                    ctx.rowData.push(nextRow);
                }

                spanCell(cell, nextRow.cells, cellIndex - 1, colSpan + 1);
            }
        }
    }
}

function insertCell(data, cell) {
    var index;

    if (typeof cell.index === "number") {
        index = cell.index;
        insertCellAt(data, cell, cell.index);
    } else {
        index = appendCell(data, cell);
    }

    return index;
}

function insertCellAt(data, cell, index) {
    data[index] = cell;
}

function appendCell(data, cell) {
    var index = data.length;

    for (var i = 0; i < data.length + 1; i++) {
        if (!data[i]) {
            data[i] = cell;
            index = i;
            break;
        }
    }

    return index;
}

function spanCell(cell, row, startIndex, colSpan) {
    for (var i = 1; i < colSpan; i++) {
        var tmp = {
            borderTop    : cell.borderTop,
            borderRight  : cell.borderRight,
            borderBottom : cell.borderBottom,
            borderLeft   : cell.borderLeft
        };
        insertCellAt(row, tmp, startIndex + i);
    }
}

var SPREADSHEET_FILTERS = function (ref$1) {
  var ref = ref$1.ref;
  var columns = ref$1.columns;
  var generators = ref$1.generators;

  return ("\n<autoFilter ref=\"" + ref + "\">\n  " + (foreach(columns, function (col) { return ("\n    <filterColumn colId=\"" + (col.index) + "\">\n      " + (generators[col.filter](col)) + "\n    </filterColumn>\n  "); })) + "\n</autoFilter>");
};

var SPREADSHEET_CUSTOM_FILTER = function (ref) {
  var logic = ref.logic;
  var criteria = ref.criteria;

  return ("\n<customFilters " + (logic === 'and' ? 'and="1"' : '') + ">\n" + (foreach(criteria, function (f) {
    var op = spreadsheetFilters.customOperator(f);
    var val = spreadsheetFilters.customValue(f);
    return ("<customFilter " + (op ? ("operator=\"" + op + "\"") : '') + " val=\"" + val + "\"/>");
})) + "\n</customFilters>");
};

var SPREADSHEET_DYNAMIC_FILTER = function (ref) {
  var type = ref.type;

  return ("<dynamicFilter type=\"" + (spreadsheetFilters.dynamicFilterType(type)) + "\" />");
};

var SPREADSHEET_TOP_FILTER = function (ref) {
  var type = ref.type;
  var value = ref.value;

  return ("<top10 percent=\"" + (/percent$/i.test(type) ? 1 : 0) + "\"\n       top=\"" + (/^top/i.test(type) ? 1 : 0) + "\"\n       val=\"" + value + "\" />");
};

var SPREADSHEET_VALUE_FILTER = function (ref) {
    var blanks = ref.blanks;
    var values = ref.values;

    return ("<filters " + (blanks ? 'blank="1"' : '') + ">\n    " + (foreach(values, function (value) { return ("\n      <filter val=\"" + value + "\" />"); })) + "\n  </filters>");
};

function spreadsheetFilters(filter) {
    return SPREADSHEET_FILTERS({
        ref: filter.ref,
        columns: filter.columns,
        generators: {
            custom  : SPREADSHEET_CUSTOM_FILTER,
            dynamic : SPREADSHEET_DYNAMIC_FILTER,
            top     : SPREADSHEET_TOP_FILTER,
            value   : SPREADSHEET_VALUE_FILTER
        }
    });
}

spreadsheetFilters.customOperator = function(f) {
    return {
        eq  : "equal",
        gt  : "greaterThan",
        gte : "greaterThanOrEqual",
        lt  : "lessThan",
        lte : "lessThanOrEqual",
        ne  : "notEqual",

        // These are not in the spec, but seems to be how Excel does
        // it (see customValue below).  For the non-negated versions,
        // the operator attribute is missing completely.
        doesnotstartwith: "notEqual",
        doesnotendwith: "notEqual",
        doesnotcontain: "notEqual",
        doesnotmatch: "notEqual"
    }[f.operator.toLowerCase()];
};

spreadsheetFilters.customValue = function(f) {
    function esc(str) {
        return str.replace(/([*?])/g, "~$1");
    }

    switch (f.operator.toLowerCase()) {
        case "startswith":
        case "doesnotstartwith":
            return esc(f.value) + "*";

        case "endswith":
        case "doesnotendwith":
            return "*" + esc(f.value);

        case "contains":
        case "doesnotcontain":
            return "*" + esc(f.value) + "*";

        default:
            return f.value;
    }
};

spreadsheetFilters.dynamicFilterType = function(type) {
    return {
        quarter1  : "Q1",
        quarter2  : "Q2",
        quarter3  : "Q3",
        quarter4  : "Q4",
        january   : "M1",
        february  : "M2",
        march     : "M3",
        april     : "M4",
        may       : "M5",
        june      : "M6",
        july      : "M7",
        august    : "M8",
        september : "M9",
        october   : "M10",
        november  : "M11",
        december  : "M12"
    }[type.toLowerCase()] || type;
};

exports.ExcelExporter = ExcelExporter;
exports.IntlService = IntlService;
exports.TemplateService = TemplateService;
exports.Workbook = Workbook;
exports.Worksheet = Worksheet;

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi91c3IvbG9jYWwvamVua2lucy93b3Jrc3BhY2Uva2VuZG8tb294bWxfcmVsZWFzZS9zcmMvc2VydmljZXMvdGVtcGxhdGUtc2VydmljZS5qcyIsIi91c3IvbG9jYWwvamVua2lucy93b3Jrc3BhY2Uva2VuZG8tb294bWxfcmVsZWFzZS9zcmMvdXRpbHMvZ2V0dGVyLmpzIiwiL3Vzci9sb2NhbC9qZW5raW5zL3dvcmtzcGFjZS9rZW5kby1vb3htbF9yZWxlYXNlL3NyYy91dGlscy9tYXAuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL2V4Y2VsLWV4cG9ydGVyLmpzIiwiL3Vzci9sb2NhbC9qZW5raW5zL3dvcmtzcGFjZS9rZW5kby1vb3htbF9yZWxlYXNlL3NyYy9zZXJ2aWNlcy9pbnRsLXNlcnZpY2UuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL3V0aWxzL2NyZWF0ZS16aXAuanMiLCIvdXNyL2xvY2FsL2plbmtpbnMvd29ya3NwYWNlL2tlbmRvLW9veG1sX3JlbGVhc2Uvc3JjL29veG1sLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImxldCBjdXJyZW50ID0ge1xuICAgIGNvbXBpbGU6IGZ1bmN0aW9uKHRlbXBsYXRlKSB7XG4gICAgICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgICB9XG59O1xuXG5jbGFzcyBUZW1wbGF0ZVNlcnZpY2Uge1xuICAgIHN0YXRpYyByZWdpc3Rlcih1c2VySW1wbGVtZW50YXRpb24pIHtcbiAgICAgICAgY3VycmVudCA9IHVzZXJJbXBsZW1lbnRhdGlvbjtcbiAgICB9XG5cbiAgICBzdGF0aWMgY29tcGlsZSh0ZW1wbGF0ZSkge1xuICAgICAgICByZXR1cm4gY3VycmVudC5jb21waWxlKHRlbXBsYXRlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFRlbXBsYXRlU2VydmljZTsiLCJjb25zdCBGSUVMRF9SRUdFWCA9IC9cXFsoPzooXFxkKyl8WydcIl0oLio/KVsnXCJdKVxcXXwoKD86KD8hXFxbLio/XFxdfFxcLikuKSspL2c7XG5jb25zdCBnZXR0ZXJDYWNoZSA9IHt9O1xuY29uc3QgVU5ERUZJTkVEID0gJ3VuZGVmaW5lZCc7XG5cbmdldHRlckNhY2hlW1VOREVGSU5FRF0gPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0dGVyKGZpZWxkKSB7XG4gICAgaWYgKGdldHRlckNhY2hlW2ZpZWxkXSkge1xuICAgICAgICByZXR1cm4gZ2V0dGVyQ2FjaGVbZmllbGRdO1xuICAgIH1cblxuICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuICAgIGZpZWxkLnJlcGxhY2UoRklFTERfUkVHRVgsIGZ1bmN0aW9uKG1hdGNoLCBpbmRleCwgaW5kZXhBY2Nlc3NvciwgZmllbGQpIHtcbiAgICAgICAgZmllbGRzLnB1c2godHlwZW9mIGluZGV4ICE9PSBVTkRFRklORUQgPyBpbmRleCA6IChpbmRleEFjY2Vzc29yIHx8IGZpZWxkKSk7XG4gICAgfSk7XG5cbiAgICBnZXR0ZXJDYWNoZVtmaWVsZF0gPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgbGV0IHJlc3VsdCA9IG9iajtcbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZmllbGRzLmxlbmd0aCAmJiByZXN1bHQ7IGlkeCsrKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHRbZmllbGRzW2lkeF1dO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGdldHRlckNhY2hlW2ZpZWxkXTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXAoYXJyYXksIGZ1bmMpIHtcbiAgICByZXR1cm4gYXJyYXkucmVkdWNlKChyZXN1bHQsIGVsLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IHZhbCA9IGZ1bmMoZWwsIGkpO1xuICAgICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKHZhbCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCBbXSk7XG59IiwiaW1wb3J0IFRlbXBsYXRlU2VydmljZSBmcm9tICcuL3NlcnZpY2VzL3RlbXBsYXRlLXNlcnZpY2UnO1xuaW1wb3J0IGdldHRlciBmcm9tICcuL3V0aWxzL2dldHRlcic7XG5pbXBvcnQgbWFwIGZyb20gJy4vdXRpbHMvbWFwJztcblxuZnVuY3Rpb24gZGVmYXVsdEdyb3VwSGVhZGVyVGVtcGxhdGUoZGF0YSkge1xuICAgIHJldHVybiBgJHsgZGF0YS50aXRsZSB9OiAkeyBkYXRhLnZhbHVlIH1gO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVBcnJheShsZW5ndGgsIGNhbGxiYWNrKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gW107XG5cbiAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGNhbGxiYWNrKGlkeCkpO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmNsYXNzIEV4Y2VsRXhwb3J0ZXIge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgb3B0aW9ucy5jb2x1bW5zID0gdGhpcy5fdHJpbUNvbHVtbnMob3B0aW9ucy5jb2x1bW5zIHx8IFtdKTtcblxuICAgICAgICB0aGlzLmFsbENvbHVtbnMgPSBtYXAodGhpcy5fbGVhZkNvbHVtbnMob3B0aW9ucy5jb2x1bW5zIHx8IFtdKSwgdGhpcy5fcHJlcGFyZUNvbHVtbik7XG5cbiAgICAgICAgdGhpcy5jb2x1bW5zID0gdGhpcy5hbGxDb2x1bW5zLmZpbHRlcihmdW5jdGlvbihjb2x1bW4pIHsgcmV0dXJuICFjb2x1bW4uaGlkZGVuOyB9KTtcblxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgICAgICB0aGlzLmRhdGEgPSBvcHRpb25zLmRhdGEgfHwgW107XG4gICAgICAgIHRoaXMuYWdncmVnYXRlcyA9IG9wdGlvbnMuYWdncmVnYXRlcyB8fCB7fTtcbiAgICAgICAgdGhpcy5ncm91cHMgPSBbXS5jb25jYXQob3B0aW9ucy5ncm91cHMgfHwgW10pO1xuICAgICAgICB0aGlzLmhpZXJhcmNoeSA9IG9wdGlvbnMuaGllcmFyY2h5O1xuICAgIH1cblxuICAgIHdvcmtib29rKCkge1xuICAgICAgICBjb25zdCB3b3JrYm9vayA9IHtcbiAgICAgICAgICAgIHNoZWV0czogWyB7XG4gICAgICAgICAgICAgICAgY29sdW1uczogdGhpcy5fY29sdW1ucygpLFxuICAgICAgICAgICAgICAgIHJvd3M6IHRoaXMuaGllcmFyY2h5ID8gdGhpcy5faGllcmFyY2h5Um93cygpIDogdGhpcy5fcm93cygpLFxuICAgICAgICAgICAgICAgIGZyZWV6ZVBhbmU6IHRoaXMuX2ZyZWV6ZVBhbmUoKSxcbiAgICAgICAgICAgICAgICBmaWx0ZXI6IHRoaXMuX2ZpbHRlcigpXG4gICAgICAgICAgICB9IF1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gd29ya2Jvb2s7XG4gICAgfVxuXG4gICAgX3RyaW1Db2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgcmV0dXJuIGNvbHVtbnMuZmlsdGVyKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBCb29sZWFuKGNvbHVtbi5maWVsZCk7XG5cbiAgICAgICAgICAgIGlmICghcmVzdWx0ICYmIGNvbHVtbi5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gdGhpcy5fdHJpbUNvbHVtbnMoY29sdW1uLmNvbHVtbnMpLmxlbmd0aCA+IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9sZWFmQ29sdW1ucyhjb2x1bW5zKSB7XG4gICAgICAgIGxldCByZXN1bHQgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGlmICghY29sdW1uc1tpZHhdLmNvbHVtbnMpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQucHVzaChjb2x1bW5zW2lkeF0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuY29uY2F0KHRoaXMuX2xlYWZDb2x1bW5zKGNvbHVtbnNbaWR4XS5jb2x1bW5zKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIF9wcmVwYXJlQ29sdW1uKGNvbHVtbikge1xuICAgICAgICBpZiAoIWNvbHVtbi5maWVsZCkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgdmFsdWUgPSBmdW5jdGlvbihkYXRhSXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIGdldHRlcihjb2x1bW4uZmllbGQsIHRydWUpKGRhdGFJdGVtKTtcbiAgICAgICAgfTtcblxuICAgICAgICBsZXQgdmFsdWVzID0gbnVsbDtcblxuICAgICAgICBpZiAoY29sdW1uLnZhbHVlcykge1xuICAgICAgICAgICAgdmFsdWVzID0ge307XG5cbiAgICAgICAgICAgIGNvbHVtbi52YWx1ZXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVzW2l0ZW0udmFsdWVdID0gaXRlbS50ZXh0O1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHZhbHVlID0gZnVuY3Rpb24oZGF0YUl0ZW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWVzW2dldHRlcihjb2x1bW4uZmllbGQsIHRydWUpKGRhdGFJdGVtKV07XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIGNvbHVtbiwge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgdmFsdWVzOiB2YWx1ZXMsXG4gICAgICAgICAgICBncm91cEhlYWRlclRlbXBsYXRlOiBjb2x1bW4uZ3JvdXBIZWFkZXJUZW1wbGF0ZSA/IFRlbXBsYXRlU2VydmljZS5jb21waWxlKGNvbHVtbi5ncm91cEhlYWRlclRlbXBsYXRlKSA6IGRlZmF1bHRHcm91cEhlYWRlclRlbXBsYXRlLFxuICAgICAgICAgICAgZ3JvdXBGb290ZXJUZW1wbGF0ZTogY29sdW1uLmdyb3VwRm9vdGVyVGVtcGxhdGUgPyBUZW1wbGF0ZVNlcnZpY2UuY29tcGlsZShjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSkgOiBudWxsLFxuICAgICAgICAgICAgZm9vdGVyVGVtcGxhdGU6IGNvbHVtbi5mb290ZXJUZW1wbGF0ZSA/IFRlbXBsYXRlU2VydmljZS5jb21waWxlKGNvbHVtbi5mb290ZXJUZW1wbGF0ZSkgOiBudWxsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9maWx0ZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmZpbHRlcmFibGUpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZGVwdGggPSB0aGlzLl9kZXB0aCgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmcm9tOiBkZXB0aCxcbiAgICAgICAgICAgIHRvOiBkZXB0aCArIHRoaXMuY29sdW1ucy5sZW5ndGggLSAxXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2NyZWF0ZVBhZGRpbmdDZWxscyhsZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUFycmF5KGxlbmd0aCwgKCkgPT4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkZmRmZGZcIixcbiAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIlxuICAgICAgICB9LCB0aGlzLm9wdGlvbnMucGFkZGluZ0NlbGxPcHRpb25zKSk7XG4gICAgfVxuXG4gICAgX2RhdGFSb3coZGF0YUl0ZW0sIGxldmVsLCBkZXB0aCkge1xuICAgICAgICBjb25zdCBjZWxscyA9IHRoaXMuX2NyZWF0ZVBhZGRpbmdDZWxscyhsZXZlbCk7XG5cbiAgICAgICAgLy8gZ3JvdXBlZFxuICAgICAgICBpZiAoZGVwdGggJiYgZGF0YUl0ZW0uaXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvbHVtbiA9IHRoaXMuYWxsQ29sdW1ucy5maWx0ZXIoZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5maWVsZCA9PT0gZGF0YUl0ZW0uZmllbGQ7XG4gICAgICAgICAgICB9KVswXTtcblxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBjb2x1bW4gJiYgY29sdW1uLnRpdGxlID8gY29sdW1uLnRpdGxlIDogZGF0YUl0ZW0uZmllbGQ7XG4gICAgICAgICAgICBjb25zdCB0ZW1wbGF0ZSA9IGNvbHVtbiA/IGNvbHVtbi5ncm91cEhlYWRlclRlbXBsYXRlIDogbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIGZpZWxkOiBkYXRhSXRlbS5maWVsZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uICYmIGNvbHVtbi52YWx1ZXMgPyBjb2x1bW4udmFsdWVzW2RhdGFJdGVtLnZhbHVlXSA6IGRhdGFJdGVtLnZhbHVlLFxuICAgICAgICAgICAgICAgIGFnZ3JlZ2F0ZXM6IGRhdGFJdGVtLmFnZ3JlZ2F0ZXMsXG4gICAgICAgICAgICAgICAgaXRlbXM6IGRhdGFJdGVtLml0ZW1zXG4gICAgICAgICAgICB9LCBkYXRhSXRlbS5hZ2dyZWdhdGVzW2RhdGFJdGVtLmZpZWxkXSk7XG5cbiAgICAgICAgICAgIGxldCB2YWx1ZSA9IGAkeyB0aXRsZSB9OiAkeyBkYXRhSXRlbS52YWx1ZSB9YDtcblxuICAgICAgICAgICAgaWYgKHRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0ZW1wbGF0ZShncm91cCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNlbGxzLnB1c2goT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIixcbiAgICAgICAgICAgICAgICBjb2xTcGFuOiB0aGlzLmNvbHVtbnMubGVuZ3RoICsgZGVwdGggLSBsZXZlbFxuICAgICAgICAgICAgfSwgKGNvbHVtbiB8fCB7fSkuZ3JvdXBIZWFkZXJDZWxsT3B0aW9ucykpO1xuXG4gICAgICAgICAgICBjb25zdCByb3dzID0gdGhpcy5fZGF0YVJvd3MoZGF0YUl0ZW0uaXRlbXMsIGxldmVsICsgMSk7XG5cbiAgICAgICAgICAgIHJvd3MudW5zaGlmdCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJncm91cC1oZWFkZXJcIixcbiAgICAgICAgICAgICAgICBjZWxsczogY2VsbHNcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gcm93cy5jb25jYXQodGhpcy5fZm9vdGVyKGRhdGFJdGVtKSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBkYXRhQ2VsbHMgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBjZWxsSWR4ID0gMDsgY2VsbElkeCA8IHRoaXMuY29sdW1ucy5sZW5ndGg7IGNlbGxJZHgrKykge1xuICAgICAgICAgICAgZGF0YUNlbGxzW2NlbGxJZHhdID0gdGhpcy5fY2VsbChkYXRhSXRlbSwgdGhpcy5jb2x1bW5zW2NlbGxJZHhdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhpZXJhcmNoeSkge1xuICAgICAgICAgICAgZGF0YUNlbGxzWzBdLmNvbFNwYW4gPSBkZXB0aCAtIGxldmVsICsgMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBbIHtcbiAgICAgICAgICAgIHR5cGU6IFwiZGF0YVwiLFxuICAgICAgICAgICAgY2VsbHM6IGNlbGxzLmNvbmNhdChkYXRhQ2VsbHMpXG4gICAgICAgIH0gXTtcbiAgICB9XG5cbiAgICBfZGF0YVJvd3MoZGF0YUl0ZW1zLCBsZXZlbCkge1xuICAgICAgICBjb25zdCBkZXB0aCA9IHRoaXMuX2RlcHRoKCk7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBbXTtcblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBkYXRhSXRlbXMubGVuZ3RoOyBpZHgrKykge1xuICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2RhdGFSb3coZGF0YUl0ZW1zW2lkeF0sIGxldmVsLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hpZXJhcmNoeVJvd3MoKSB7XG4gICAgICAgIGNvbnN0IGRlcHRoID0gdGhpcy5fZGVwdGgoKTtcbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YTtcbiAgICAgICAgY29uc3QgaXRlbUxldmVsID0gdGhpcy5oaWVyYXJjaHkuaXRlbUxldmVsO1xuICAgICAgICBjb25zdCBoYXNGb290ZXIgPSB0aGlzLl9oYXNGb290ZXJUZW1wbGF0ZSgpO1xuICAgICAgICBjb25zdCByb3dzID0gW107XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgICAgbGV0IHByZXZpb3VzTGV2ZWwgPSAwO1xuICAgICAgICBsZXQgcHJldmlvdXNJdGVtSWQ7XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgZGF0YS5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZGF0YVtpZHhdO1xuICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBpdGVtTGV2ZWwoaXRlbSk7XG5cbiAgICAgICAgICAgIGlmIChoYXNGb290ZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAobGV2ZWwgPiBwcmV2aW91c0xldmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmVudHMucHVzaCh7IGlkOiBwcmV2aW91c0l0ZW1JZCwgbGV2ZWw6IHByZXZpb3VzTGV2ZWwgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChsZXZlbCA8IHByZXZpb3VzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2hpZXJhcmNoeUZvb3RlclJvd3MocGFyZW50cywgbGV2ZWwsIGRlcHRoKSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcHJldmlvdXNMZXZlbCA9IGxldmVsO1xuICAgICAgICAgICAgICAgIHByZXZpb3VzSXRlbUlkID0gaXRlbS5pZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2RhdGFSb3coaXRlbSwgbGV2ZWwgKyAxLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGhhc0Zvb3Rlcikge1xuICAgICAgICAgICAgcm93cy5wdXNoLmFwcGx5KHJvd3MsIHRoaXMuX2hpZXJhcmNoeUZvb3RlclJvd3MocGFyZW50cywgMCwgZGVwdGgpKTtcblxuICAgICAgICAgICAgY29uc3Qgcm9vdEFnZ3JlZ2F0ZSA9IGRhdGEubGVuZ3RoID8gdGhpcy5hZ2dyZWdhdGVzW2RhdGFbMF0ucGFyZW50SWRdIDoge307XG4gICAgICAgICAgICByb3dzLnB1c2godGhpcy5faGllcmFyY2h5Rm9vdGVyKHJvb3RBZ2dyZWdhdGUsIDAsIGRlcHRoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9wcmVwZW5kSGVhZGVyUm93cyhyb3dzKTtcblxuICAgICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBfaGllcmFyY2h5Rm9vdGVyUm93cyhwYXJlbnRzLCBjdXJyZW50TGV2ZWwsIGRlcHRoKSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSBbXTtcbiAgICAgICAgd2hpbGUgKHBhcmVudHMubGVuZ3RoICYmIHBhcmVudHNbcGFyZW50cy5sZW5ndGggLSAxXS5sZXZlbCA+PSBjdXJyZW50TGV2ZWwpIHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmVudCA9IHBhcmVudHMucG9wKCk7XG4gICAgICAgICAgICByb3dzLnB1c2godGhpcy5faGllcmFyY2h5Rm9vdGVyKHRoaXMuYWdncmVnYXRlc1twYXJlbnQuaWRdLCBwYXJlbnQubGV2ZWwgKyAxLCBkZXB0aCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfVxuXG4gICAgX2hhc0Zvb3RlclRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5jb2x1bW5zO1xuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW5zW2lkeF0uZm9vdGVyVGVtcGxhdGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9oaWVyYXJjaHlGb290ZXIoYWdncmVnYXRlcywgbGV2ZWwsIGRlcHRoKSB7XG4gICAgICAgIGNvbnN0IGNlbGxzID0gdGhpcy5jb2x1bW5zLm1hcChmdW5jdGlvbihjb2x1bW4sIGluZGV4KSB7XG4gICAgICAgICAgICBjb25zdCBjb2xTcGFuID0gaW5kZXggPyAxIDogZGVwdGggLSBsZXZlbCArIDE7XG4gICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiBcIiNkZmRmZGZcIixcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgICAgICBjb2xTcGFuOiBjb2xTcGFuLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uLmZvb3RlclRlbXBsYXRlKE9iamVjdC5hc3NpZ24oe30sIChhZ2dyZWdhdGVzIHx8IHt9KVtjb2x1bW4uZmllbGRdKSlcbiAgICAgICAgICAgICAgICB9LCBjb2x1bW4uZm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiLFxuICAgICAgICAgICAgICAgIGNvbFNwYW46IGNvbFNwYW5cbiAgICAgICAgICAgIH0sIGNvbHVtbi5mb290ZXJDZWxsT3B0aW9ucyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0eXBlOiBcImZvb3RlclwiLFxuICAgICAgICAgICAgY2VsbHM6IHRoaXMuX2NyZWF0ZVBhZGRpbmdDZWxscyhsZXZlbCkuY29uY2F0KGNlbGxzKVxuICAgICAgICB9O1xuICAgIH1cblxuICAgIF9mb290ZXIoZGF0YUl0ZW0pIHtcbiAgICAgICAgY29uc3Qgcm93cyA9IFtdO1xuICAgICAgICBsZXQgZm9vdGVyID0gZmFsc2U7XG5cbiAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLmNvbHVtbnMubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgIGlmIChjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBsYXRlRGF0YSA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYWdncmVnYXRlcywgZGF0YUl0ZW0uYWdncmVnYXRlcywgZGF0YUl0ZW0uYWdncmVnYXRlc1tjb2x1bW4uZmllbGRdLCB7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtczogZGF0YUl0ZW0uaXRlbXMsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZDogZGF0YUl0ZW0uZmllbGQsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZGF0YUl0ZW0udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3RlbGVyaWsva2VuZG8tdWktY29yZS9pc3N1ZXMvMzAyNFxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90ZWxlcmlrL2tlbmRvLXVpLWNvcmUvaXNzdWVzLzMwOTVcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZURhdGFbZGF0YUl0ZW0uZmllbGRdID0gdGVtcGxhdGVEYXRhO1xuXG4gICAgICAgICAgICAgICAgZm9vdGVyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IFwiI2RmZGZkZlwiLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjMzMzXCIsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjb2x1bW4uZ3JvdXBGb290ZXJUZW1wbGF0ZSh0ZW1wbGF0ZURhdGEpXG4gICAgICAgICAgICAgICAgfSwgY29sdW1uLmdyb3VwRm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiIzMzM1wiXG4gICAgICAgICAgICB9LCBjb2x1bW4uZ3JvdXBGb290ZXJDZWxsT3B0aW9ucyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChmb290ZXIpIHtcbiAgICAgICAgICAgIHJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJncm91cC1mb290ZXJcIixcbiAgICAgICAgICAgICAgICBjZWxsczogdGhpcy5fY3JlYXRlUGFkZGluZ0NlbGxzKHRoaXMuZ3JvdXBzLmxlbmd0aCkuY29uY2F0KGNlbGxzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBfaXNDb2x1bW5WaXNpYmxlKGNvbHVtbikge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmlzaWJsZUNvbHVtbnMoWyBjb2x1bW4gXSkubGVuZ3RoID4gMCAmJiAoY29sdW1uLmZpZWxkIHx8IGNvbHVtbi5jb2x1bW5zKTtcbiAgICB9XG5cbiAgICBfdmlzaWJsZUNvbHVtbnMoY29sdW1ucykge1xuICAgICAgICByZXR1cm4gY29sdW1ucy5maWx0ZXIoKGNvbHVtbikgPT4ge1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9ICFjb2x1bW4uaGlkZGVuO1xuICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiBjb2x1bW4uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHRoaXMuX3Zpc2libGVDb2x1bW5zKGNvbHVtbi5jb2x1bW5zKS5sZW5ndGggPiAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgX2hlYWRlclJvdyhyb3csIGdyb3Vwcykge1xuICAgICAgICBjb25zdCBoZWFkZXJzID0gcm93LmNlbGxzLm1hcChmdW5jdGlvbihjZWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihjZWxsLCB7XG4gICAgICAgICAgICAgICAgY29sU3BhbjogY2VsbC5jb2xTcGFuID4gMSA/IGNlbGwuY29sU3BhbiA6IDEsXG4gICAgICAgICAgICAgICAgcm93U3Bhbjogcm93LnJvd1NwYW4gPiAxICYmICFjZWxsLmNvbFNwYW4gPyByb3cucm93U3BhbiA6IDFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAodGhpcy5oaWVyYXJjaHkpIHtcbiAgICAgICAgICAgIGhlYWRlcnNbMF0uY29sU3BhbiA9IHRoaXMuX2RlcHRoKCkgKyAxO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHR5cGU6IFwiaGVhZGVyXCIsXG4gICAgICAgICAgICBjZWxsczogY3JlYXRlQXJyYXkoZ3JvdXBzLmxlbmd0aCwgKCkgPT4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjN2E3YTdhXCIsXG4gICAgICAgICAgICAgICAgY29sb3I6IFwiI2ZmZlwiXG4gICAgICAgICAgICB9LCB0aGlzLm9wdGlvbnMuaGVhZGVyUGFkZGluZ0NlbGxPcHRpb25zKSkuY29uY2F0KGhlYWRlcnMpXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX3ByZXBlbmRIZWFkZXJSb3dzKHJvd3MpIHtcbiAgICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5ncm91cHM7XG5cbiAgICAgICAgY29uc3QgaGVhZGVyUm93cyA9IFsgeyByb3dTcGFuOiAxLCBjZWxsczogW10sIGluZGV4OiAwIH0gXTtcblxuICAgICAgICB0aGlzLl9wcmVwYXJlSGVhZGVyUm93cyhoZWFkZXJSb3dzLCB0aGlzLm9wdGlvbnMuY29sdW1ucyk7XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gaGVhZGVyUm93cy5sZW5ndGggLSAxOyBpZHggPj0gMDsgaWR4LS0pIHtcbiAgICAgICAgICAgIHJvd3MudW5zaGlmdCh0aGlzLl9oZWFkZXJSb3coaGVhZGVyUm93c1tpZHhdLCBncm91cHMpKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9wcmVwYXJlSGVhZGVyUm93cyhyb3dzLCBjb2x1bW5zLCBwYXJlbnRDZWxsLCBwYXJlbnRSb3cpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcGFyZW50Um93IHx8IHJvd3Nbcm93cy5sZW5ndGggLSAxXTtcbiAgICAgICAgbGV0IGNoaWxkUm93ID0gcm93c1tyb3cuaW5kZXggKyAxXTtcbiAgICAgICAgbGV0IHRvdGFsQ29sU3BhbiA9IDA7XG5cbiAgICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgY29sdW1ucy5sZW5ndGg7IGlkeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBjb2x1bW4gPSBjb2x1bW5zW2lkeF07XG4gICAgICAgICAgICBpZiAodGhpcy5faXNDb2x1bW5WaXNpYmxlKGNvbHVtbikpIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNlbGwgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjN2E3YTdhXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiNmZmZcIixcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNvbHVtbi50aXRsZSB8fCBjb2x1bW4uZmllbGQsXG4gICAgICAgICAgICAgICAgICAgIGNvbFNwYW46IDBcbiAgICAgICAgICAgICAgICB9LCBjb2x1bW4uaGVhZGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIHJvdy5jZWxscy5wdXNoKGNlbGwpO1xuXG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbi5jb2x1bW5zICYmIGNvbHVtbi5jb2x1bW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoaWxkUm93KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjaGlsZFJvdyA9IHsgcm93U3BhbjogMCwgY2VsbHM6IFtdLCBpbmRleDogcm93cy5sZW5ndGggfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvd3MucHVzaChjaGlsZFJvdyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2VsbC5jb2xTcGFuID0gdGhpcy5fdHJpbUNvbHVtbnModGhpcy5fdmlzaWJsZUNvbHVtbnMoY29sdW1uLmNvbHVtbnMpKS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ByZXBhcmVIZWFkZXJSb3dzKHJvd3MsIGNvbHVtbi5jb2x1bW5zLCBjZWxsLCBjaGlsZFJvdyk7XG4gICAgICAgICAgICAgICAgICAgIHRvdGFsQ29sU3BhbiArPSBjZWxsLmNvbFNwYW4gLSAxO1xuICAgICAgICAgICAgICAgICAgICByb3cucm93U3BhbiA9IHJvd3MubGVuZ3RoIC0gcm93LmluZGV4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJlbnRDZWxsKSB7XG4gICAgICAgICAgICBwYXJlbnRDZWxsLmNvbFNwYW4gKz0gdG90YWxDb2xTcGFuO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3Jvd3MoKSB7XG4gICAgICAgIGNvbnN0IHJvd3MgPSB0aGlzLl9kYXRhUm93cyh0aGlzLmRhdGEsIDApO1xuXG4gICAgICAgIGlmICh0aGlzLmNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLl9wcmVwZW5kSGVhZGVyUm93cyhyb3dzKTtcbiAgICAgICAgICAgIGxldCBmb290ZXIgPSBmYWxzZTtcblxuICAgICAgICAgICAgY29uc3QgY2VsbHMgPSB0aGlzLmNvbHVtbnMubWFwKChjb2x1bW4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoY29sdW1uLmZvb3RlclRlbXBsYXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvb3RlciA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogXCIjMzMzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY29sdW1uLmZvb3RlclRlbXBsYXRlKE9iamVjdC5hc3NpZ24oe30sIHRoaXMuYWdncmVnYXRlcywgdGhpcy5hZ2dyZWdhdGVzW2NvbHVtbi5maWVsZF0pKVxuICAgICAgICAgICAgICAgICAgICB9LCBjb2x1bW4uZm9vdGVyQ2VsbE9wdGlvbnMpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCIjZGZkZmRmXCIsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcIiMzMzNcIlxuICAgICAgICAgICAgICAgIH0sIGNvbHVtbi5mb290ZXJDZWxsT3B0aW9ucyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKGZvb3Rlcikge1xuICAgICAgICAgICAgICAgIHJvd3MucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiZm9vdGVyXCIsXG4gICAgICAgICAgICAgICAgICAgIGNlbGxzOiB0aGlzLl9jcmVhdGVQYWRkaW5nQ2VsbHModGhpcy5ncm91cHMubGVuZ3RoKS5jb25jYXQoY2VsbHMpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcm93cztcbiAgICB9XG5cbiAgICBfaGVhZGVyRGVwdGgoY29sdW1ucykge1xuICAgICAgICBjb25zdCByZXN1bHQgPSAxO1xuICAgICAgICBsZXQgbWF4ID0gMDtcblxuICAgICAgICBmb3IgKGxldCBpZHggPSAwOyBpZHggPCBjb2x1bW5zLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgICAgIGlmIChjb2x1bW5zW2lkeF0uY29sdW1ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRlbXAgPSB0aGlzLl9oZWFkZXJEZXB0aChjb2x1bW5zW2lkeF0uY29sdW1ucyk7XG4gICAgICAgICAgICAgICAgaWYgKHRlbXAgPiBtYXgpIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4ID0gdGVtcDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdCArIG1heDtcbiAgICB9XG5cbiAgICBfZnJlZXplUGFuZSgpIHtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IHRoaXMuX3Zpc2libGVDb2x1bW5zKHRoaXMub3B0aW9ucy5jb2x1bW5zIHx8IFtdKTtcblxuICAgICAgICBjb25zdCBjb2xTcGxpdCA9IHRoaXMuX3Zpc2libGVDb2x1bW5zKHRoaXMuX3RyaW1Db2x1bW5zKHRoaXMuX2xlYWZDb2x1bW5zKGNvbHVtbnMuZmlsdGVyKGZ1bmN0aW9uKGNvbHVtbikge1xuICAgICAgICAgICAgcmV0dXJuIGNvbHVtbi5sb2NrZWQ7XG4gICAgICAgIH0pKSkpLmxlbmd0aDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcm93U3BsaXQ6IHRoaXMuX2hlYWRlckRlcHRoKGNvbHVtbnMpLFxuICAgICAgICAgICAgY29sU3BsaXQ6IGNvbFNwbGl0ID8gY29sU3BsaXQgKyB0aGlzLmdyb3Vwcy5sZW5ndGggOiAwXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgX2NlbGwoZGF0YUl0ZW0sIGNvbHVtbikge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB2YWx1ZTogY29sdW1uLnZhbHVlKGRhdGFJdGVtKVxuICAgICAgICB9LCBjb2x1bW4uY2VsbE9wdGlvbnMpO1xuICAgIH1cblxuICAgIF9kZXB0aCgpIHtcbiAgICAgICAgbGV0IGRlcHRoID0gMDtcblxuICAgICAgICBpZiAodGhpcy5oaWVyYXJjaHkpIHtcbiAgICAgICAgICAgIGRlcHRoID0gdGhpcy5oaWVyYXJjaHkuZGVwdGg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkZXB0aCA9IHRoaXMuZ3JvdXBzLmxlbmd0aDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBkZXB0aDtcbiAgICB9XG5cbiAgICBfY29sdW1ucygpIHtcbiAgICAgICAgY29uc3QgZGVwdGggPSB0aGlzLl9kZXB0aCgpO1xuICAgICAgICBjb25zdCBjb2x1bW5zID0gY3JlYXRlQXJyYXkoZGVwdGgsICgpID0+ICh7IHdpZHRoOiAyMCB9KSk7XG5cbiAgICAgICAgcmV0dXJuIGNvbHVtbnMuY29uY2F0KHRoaXMuY29sdW1ucy5tYXAoZnVuY3Rpb24oY29sdW1uKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiBwYXJzZUludChjb2x1bW4ud2lkdGgsIDEwKSxcbiAgICAgICAgICAgICAgICBhdXRvV2lkdGg6IGNvbHVtbi53aWR0aCA/IGZhbHNlIDogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRXhjZWxFeHBvcnRlcjtcbiIsImxldCBjdXJyZW50ID0ge1xuICAgIHRvU3RyaW5nOiAodmFsdWUpID0+IHZhbHVlXG59O1xuXG5jbGFzcyBJbnRsU2VydmljZSB7XG4gICAgc3RhdGljIHJlZ2lzdGVyKHVzZXJJbXBsZW1lbnRhdGlvbikge1xuICAgICAgICBjdXJyZW50ID0gdXNlckltcGxlbWVudGF0aW9uO1xuICAgIH1cblxuICAgIHN0YXRpYyB0b1N0cmluZyh2YWx1ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiBjdXJyZW50LnRvU3RyaW5nKHZhbHVlLCBmb3JtYXQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgSW50bFNlcnZpY2U7IiwiaW1wb3J0IEpTWmlwIGZyb20gJ2pzemlwL2Rpc3QvanN6aXAnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVaaXAoKSB7XG4gICAgcmV0dXJuIG5ldyBKU1ppcCgpO1xufSIsImltcG9ydCBtYXAgZnJvbSAnLi91dGlscy9tYXAnO1xuaW1wb3J0IGNyZWF0ZVppcCBmcm9tICcuL3V0aWxzL2NyZWF0ZS16aXAnO1xuaW1wb3J0IEludGxTZXJ2aWNlIGZyb20gJy4vc2VydmljZXMvaW50bC1zZXJ2aWNlJztcblxuY29uc3QgREFUQV9VUkxfUFJFRklYID0gXCJkYXRhOmFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0O2Jhc2U2NCxcIjtcbmNvbnN0IERBVEFfVVJMX09QVElPTlMgPSB7IGNvbXByZXNzaW9uOiBcIkRFRkxBVEVcIiwgdHlwZTogXCJiYXNlNjRcIiB9O1xuY29uc3QgTVNfUEVSX01JTlVURSA9IDYwMDAwO1xuY29uc3QgTVNfUEVSX0RBWSA9IDg2NDAwMDAwO1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBrZXktc3BhY2luZywgbm8tYXJyb3ctY29uZGl0aW9uLCBpbmRlbnQsIG5vLW5lc3RlZC10ZXJuYXJ5LCBjb25zaXN0ZW50LXJldHVybiAqL1xuXG5mdW5jdGlvbiB0b0RhdGFVUkkoY29udGVudCkge1xuICAgIHJldHVybiBEQVRBX1VSTF9QUkVGSVggKyBjb250ZW50O1xufVxuXG5mdW5jdGlvbiBpbmRleE9mKHRoaW5nLCBhcnJheSkge1xuICAgIHJldHVybiBhcnJheS5pbmRleE9mKHRoaW5nKTtcbn1cblxuY29uc3QgcGFyc2VKU09OID0gSlNPTi5wYXJzZS5iaW5kKEpTT04pO1xuXG5mdW5jdGlvbiBFU0ModmFsKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWwpXG4gICAgICAgIC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIilcbiAgICAgICAgLnJlcGxhY2UoLzwvZywgXCImbHQ7XCIpXG4gICAgICAgIC5yZXBsYWNlKC8+L2csIFwiJmd0O1wiKVxuICAgICAgICAucmVwbGFjZSgvXFxcIi9nLCBcIiZxdW90O1wiKVxuICAgICAgICAucmVwbGFjZSgvXFwnL2csIFwiJiMzOTtcIik7XG59XG5cbmZ1bmN0aW9uIHJlcGVhdChjb3VudCwgZnVuYykge1xuICAgIGxldCBzdHIgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7ICsraSkge1xuICAgICAgICBzdHIgKz0gZnVuYyhpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbn1cblxuZnVuY3Rpb24gZm9yZWFjaChhcnIsIGZ1bmMpIHtcbiAgICBsZXQgc3RyID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7ICsraSkge1xuICAgICAgICBzdHIgKz0gZnVuYyhhcnJbaV0sIGkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RyO1xufVxuXG5jb25zdCBYTUxIRUFEID0gJzw/eG1sIHZlcnNpb249XCIxLjBcIiBlbmNvZGluZz1cIlVURi04XCIgc3RhbmRhbG9uZT1cInllc1wiPz5cXHInO1xuXG5jb25zdCBSRUxTID0gYCR7WE1MSEVBRH1cbiAgICAgICAgICAgIDxSZWxhdGlvbnNoaXBzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzXCI+XG4gICAgICAgICAgICAgICA8UmVsYXRpb25zaGlwIElkPVwicklkM1wiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2V4dGVuZGVkLXByb3BlcnRpZXNcIiBUYXJnZXQ9XCJkb2NQcm9wcy9hcHAueG1sXCIvPlxuICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZDJcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzL21ldGFkYXRhL2NvcmUtcHJvcGVydGllc1wiIFRhcmdldD1cImRvY1Byb3BzL2NvcmUueG1sXCIvPlxuICAgICAgICAgICAgICAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZDFcIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9vZmZpY2VEb2N1bWVudFwiIFRhcmdldD1cInhsL3dvcmtib29rLnhtbFwiLz5cbiAgICAgICAgICAgIDwvUmVsYXRpb25zaGlwcz5gO1xuXG5jb25zdCBDT1JFID0gKHsgY3JlYXRvciwgbGFzdE1vZGlmaWVkQnksIGNyZWF0ZWQsIG1vZGlmaWVkIH0pID0+IGAke1hNTEhFQUR9XG4gPGNwOmNvcmVQcm9wZXJ0aWVzIHhtbG5zOmNwPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9tZXRhZGF0YS9jb3JlLXByb3BlcnRpZXNcIlxuICAgeG1sbnM6ZGM9XCJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xL1wiIHhtbG5zOmRjdGVybXM9XCJodHRwOi8vcHVybC5vcmcvZGMvdGVybXMvXCJcbiAgIHhtbG5zOmRjbWl0eXBlPVwiaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1wiIHhtbG5zOnhzaT1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlXCI+XG4gICA8ZGM6Y3JlYXRvcj4ke0VTQyhjcmVhdG9yKX08L2RjOmNyZWF0b3I+XG4gICA8Y3A6bGFzdE1vZGlmaWVkQnk+JHtFU0MobGFzdE1vZGlmaWVkQnkpfTwvY3A6bGFzdE1vZGlmaWVkQnk+XG4gICA8ZGN0ZXJtczpjcmVhdGVkIHhzaTp0eXBlPVwiZGN0ZXJtczpXM0NEVEZcIj4ke0VTQyhjcmVhdGVkKX08L2RjdGVybXM6Y3JlYXRlZD5cbiAgIDxkY3Rlcm1zOm1vZGlmaWVkIHhzaTp0eXBlPVwiZGN0ZXJtczpXM0NEVEZcIj4ke0VTQyhtb2RpZmllZCl9PC9kY3Rlcm1zOm1vZGlmaWVkPlxuPC9jcDpjb3JlUHJvcGVydGllcz5gO1xuXG5jb25zdCBBUFAgPSAoeyBzaGVldHMgfSkgPT4gYCR7WE1MSEVBRH1cbjxQcm9wZXJ0aWVzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvZXh0ZW5kZWQtcHJvcGVydGllc1wiIHhtbG5zOnZ0PVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvZG9jUHJvcHNWVHlwZXNcIj5cbiAgPEFwcGxpY2F0aW9uPk1pY3Jvc29mdCBFeGNlbDwvQXBwbGljYXRpb24+XG4gIDxEb2NTZWN1cml0eT4wPC9Eb2NTZWN1cml0eT5cbiAgPFNjYWxlQ3JvcD5mYWxzZTwvU2NhbGVDcm9wPlxuICA8SGVhZGluZ1BhaXJzPlxuICAgIDx2dDp2ZWN0b3Igc2l6ZT1cIjJcIiBiYXNlVHlwZT1cInZhcmlhbnRcIj5cbiAgICAgIDx2dDp2YXJpYW50PlxuICAgICAgICA8dnQ6bHBzdHI+V29ya3NoZWV0czwvdnQ6bHBzdHI+XG4gICAgICA8L3Z0OnZhcmlhbnQ+XG4gICAgICA8dnQ6dmFyaWFudD5cbiAgICAgICAgPHZ0Omk0PiR7c2hlZXRzLmxlbmd0aH08L3Z0Omk0PlxuICAgICAgPC92dDp2YXJpYW50PlxuICAgIDwvdnQ6dmVjdG9yPlxuICA8L0hlYWRpbmdQYWlycz5cbiAgPFRpdGxlc09mUGFydHM+XG4gICAgPHZ0OnZlY3RvciBzaXplPVwiJHtzaGVldHMubGVuZ3RofVwiIGJhc2VUeXBlPVwibHBzdHJcIj4ke1xuICAgICAgZm9yZWFjaChzaGVldHMsIChzaGVldCwgaSkgPT5cbiAgICAgICAgc2hlZXQub3B0aW9ucy50aXRsZVxuICAgICAgICAgID8gYDx2dDpscHN0cj4ke0VTQyhzaGVldC5vcHRpb25zLnRpdGxlKX08L3Z0Omxwc3RyPmBcbiAgICAgICAgICA6IGA8dnQ6bHBzdHI+U2hlZXQke2kgKyAxfTwvdnQ6bHBzdHI+YFxuICAgICAgKVxuICAgIH08L3Z0OnZlY3Rvcj5cbiAgPC9UaXRsZXNPZlBhcnRzPlxuICA8TGlua3NVcFRvRGF0ZT5mYWxzZTwvTGlua3NVcFRvRGF0ZT5cbiAgPFNoYXJlZERvYz5mYWxzZTwvU2hhcmVkRG9jPlxuICA8SHlwZXJsaW5rc0NoYW5nZWQ+ZmFsc2U8L0h5cGVybGlua3NDaGFuZ2VkPlxuICA8QXBwVmVyc2lvbj4xNC4wMzAwPC9BcHBWZXJzaW9uPlxuPC9Qcm9wZXJ0aWVzPmA7XG5cbmNvbnN0IENPTlRFTlRfVFlQRVMgPSAoeyBjb3VudCB9KSA9PiBgJHtYTUxIRUFEfVxuPFR5cGVzIHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9jb250ZW50LXR5cGVzXCI+XG4gIDxEZWZhdWx0IEV4dGVuc2lvbj1cInJlbHNcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLnJlbGF0aW9uc2hpcHMreG1sXCIgLz5cbiAgPERlZmF1bHQgRXh0ZW5zaW9uPVwieG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi94bWxcIiAvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvd29ya2Jvb2sueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldC5tYWluK3htbFwiIC8+XG4gIDxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC9zdHlsZXMueG1sXCIgQ29udGVudFR5cGU9XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zdHlsZXMreG1sXCIvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIveGwvc2hhcmVkU3RyaW5ncy54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoYXJlZFN0cmluZ3MreG1sXCIvPlxuICAke3JlcGVhdChjb3VudCwgaWR4ID0+XG4gICAgYDxPdmVycmlkZSBQYXJ0TmFtZT1cIi94bC93b3Jrc2hlZXRzL3NoZWV0JHtpZHggKyAxfS54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLndvcmtzaGVldCt4bWxcIiAvPmApfVxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIvZG9jUHJvcHMvY29yZS54bWxcIiBDb250ZW50VHlwZT1cImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLmNvcmUtcHJvcGVydGllcyt4bWxcIiAvPlxuICA8T3ZlcnJpZGUgUGFydE5hbWU9XCIvZG9jUHJvcHMvYXBwLnhtbFwiIENvbnRlbnRUeXBlPVwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LmV4dGVuZGVkLXByb3BlcnRpZXMreG1sXCIgLz5cbjwvVHlwZXM+YDtcblxuY29uc3QgV09SS0JPT0sgPSAoeyBzaGVldHMsIGZpbHRlck5hbWVzLCB1c2VyTmFtZXMgfSkgPT4gYCR7WE1MSEVBRH1cbjx3b3JrYm9vayB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiIHhtbG5zOnI9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzXCI+XG4gIDxmaWxlVmVyc2lvbiBhcHBOYW1lPVwieGxcIiBsYXN0RWRpdGVkPVwiNVwiIGxvd2VzdEVkaXRlZD1cIjVcIiBydXBCdWlsZD1cIjkzMDNcIiAvPlxuICA8d29ya2Jvb2tQciBkZWZhdWx0VGhlbWVWZXJzaW9uPVwiMTI0MjI2XCIgLz5cbiAgPGJvb2tWaWV3cz5cbiAgICA8d29ya2Jvb2tWaWV3IHhXaW5kb3c9XCIyNDBcIiB5V2luZG93PVwiNDVcIiB3aW5kb3dXaWR0aD1cIjE4MTk1XCIgd2luZG93SGVpZ2h0PVwiNzk5NVwiIC8+XG4gIDwvYm9va1ZpZXdzPlxuICA8c2hlZXRzPlxuICAke2ZvcmVhY2goc2hlZXRzLCAoeyBvcHRpb25zIH0sIGkpID0+IHtcbiAgICBjb25zdCBuYW1lID0gb3B0aW9ucy5uYW1lIHx8IG9wdGlvbnMudGl0bGUgfHwgYFNoZWV0JHtpICsgMX1gO1xuICAgIHJldHVybiBgPHNoZWV0IG5hbWU9XCIke0VTQyhuYW1lKX1cIiBzaGVldElkPVwiJHtpICsgMX1cIiByOmlkPVwicklkJHtpICsgMX1cIiAvPmA7XG4gIH0pfVxuICA8L3NoZWV0cz5cbiAgJHtmaWx0ZXJOYW1lcy5sZW5ndGggfHwgdXNlck5hbWVzLmxlbmd0aCA/IGBcbiAgICA8ZGVmaW5lZE5hbWVzPlxuICAgICAgJHtmb3JlYWNoKGZpbHRlck5hbWVzLCAoZikgPT4gYFxuICAgICAgICAgPGRlZmluZWROYW1lIG5hbWU9XCJfeGxubS5fRmlsdGVyRGF0YWJhc2VcIiBoaWRkZW49XCIxXCIgbG9jYWxTaGVldElkPVwiJHtmLmxvY2FsU2hlZXRJZH1cIj4ke0VTQyhmLm5hbWUpfSEke0VTQyhmLmZyb20pfToke0VTQyhmLnRvKX08L2RlZmluZWROYW1lPmApfVxuICAgICAgJHtmb3JlYWNoKHVzZXJOYW1lcywgKGYpID0+IGBcbiAgICAgICAgIDxkZWZpbmVkTmFtZSBuYW1lPVwiJHtmLm5hbWV9XCIgaGlkZGVuPVwiJHtmLmhpZGRlbiA/IDEgOiAwfVwiICR7Zi5sb2NhbFNoZWV0SWQgIT0gbnVsbCA/IGBsb2NhbFNoZWV0SWQ9XCIke2YubG9jYWxTaGVldElkfVwiYCA6ICcnfT4ke0VTQyhmLnZhbHVlKX08L2RlZmluZWROYW1lPmApfVxuICAgIDwvZGVmaW5lZE5hbWVzPmAgOiAnJ31cbiAgPGNhbGNQciBmdWxsQ2FsY09uTG9hZD1cIjFcIiBjYWxjSWQ9XCIxNDU2MjFcIiAvPlxuPC93b3JrYm9vaz5gO1xuXG5jb25zdCBXT1JLU0hFRVQgPSAoe1xuICAgIGZyb3plbkNvbHVtbnMsXG4gICAgZnJvemVuUm93cyxcbiAgICBjb2x1bW5zLFxuICAgIGRlZmF1bHRzLFxuICAgIGRhdGEsXG4gICAgaW5kZXgsXG4gICAgbWVyZ2VDZWxscyxcbiAgICBhdXRvRmlsdGVyLFxuICAgIGZpbHRlcixcbiAgICBzaG93R3JpZExpbmVzLFxuICAgIGh5cGVybGlua3MsXG4gICAgdmFsaWRhdGlvbnMsXG4gICAgZGVmYXVsdENlbGxTdHlsZUlkLFxuICAgIHJ0bFxufSkgPT4gYCR7WE1MSEVBRH1cbjx3b3Jrc2hlZXQgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczptYz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9tYXJrdXAtY29tcGF0aWJpbGl0eS8yMDA2XCIgeG1sbnM6cj1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHNcIiB4bWxuczp4MTRhYz1cImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL3NwcmVhZHNoZWV0bWwvMjAwOS85L2FjXCIgbWM6SWdub3JhYmxlPVwieDE0YWNcIj5cbiAgIDxkaW1lbnNpb24gcmVmPVwiQTFcIiAvPlxuXG4gICA8c2hlZXRWaWV3cz5cbiAgICAgPHNoZWV0VmlldyAkeyBydGwgPyAncmlnaHRUb0xlZnQ9XCIxXCInIDogJycgfSAke2luZGV4ID09PSAwID8gJ3RhYlNlbGVjdGVkPVwiMVwiJyA6ICcnfSB3b3JrYm9va1ZpZXdJZD1cIjBcIiAke3Nob3dHcmlkTGluZXMgPT09IGZhbHNlID8gJ3Nob3dHcmlkTGluZXM9XCIwXCInIDogJyd9PlxuICAgICAke2Zyb3plblJvd3MgfHwgZnJvemVuQ29sdW1ucyA/IGBcbiAgICAgICA8cGFuZSBzdGF0ZT1cImZyb3plblwiXG4gICAgICAgICAke2Zyb3plbkNvbHVtbnMgPyBgeFNwbGl0PVwiJHtmcm96ZW5Db2x1bW5zfVwiYCA6ICcnfVxuICAgICAgICAgJHtmcm96ZW5Sb3dzID8gYHlTcGxpdD1cIiR7ZnJvemVuUm93c31cImAgOiAnJ31cbiAgICAgICAgIHRvcExlZnRDZWxsPVwiJHtTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgKGZyb3plbkNvbHVtbnMgfHwgMCkpICsgKChmcm96ZW5Sb3dzIHx8IDApICsgMSl9XCJcbiAgICAgICAvPmAgOiAnJ31cbiAgICAgPC9zaGVldFZpZXc+XG4gICA8L3NoZWV0Vmlld3M+XG5cbiAgIDxzaGVldEZvcm1hdFByIHgxNGFjOmR5RGVzY2VudD1cIjAuMjVcIiBkZWZhdWx0Um93SGVpZ2h0PVwiJHtkZWZhdWx0cy5yb3dIZWlnaHQgPyBkZWZhdWx0cy5yb3dIZWlnaHQgKiAwLjc1IDogMTV9XCJcbiAgICAgJHtkZWZhdWx0cy5jb2x1bW5XaWR0aCA/IGBkZWZhdWx0Q29sV2lkdGg9XCIke3RvV2lkdGgoZGVmYXVsdHMuY29sdW1uV2lkdGgpfVwiYCA6ICcnfSAvPlxuXG4gICAke2RlZmF1bHRDZWxsU3R5bGVJZCAhPSBudWxsIHx8IChjb2x1bW5zICYmIGNvbHVtbnMubGVuZ3RoID4gMCkgPyBgXG4gICAgIDxjb2xzPlxuICAgICAgICR7IWNvbHVtbnMgfHwgIWNvbHVtbnMubGVuZ3RoID8gYFxuICAgICAgICAgPGNvbCBtaW49XCIxXCIgbWF4PVwiMTYzODRcIiBzdHlsZT1cIiR7ZGVmYXVsdENlbGxTdHlsZUlkfVwiXG4gICAgICAgICAgICAgICR7ZGVmYXVsdHMuY29sdW1uV2lkdGggPyBgd2lkdGg9XCIke3RvV2lkdGgoZGVmYXVsdHMuY29sdW1uV2lkdGgpfVwiYCA6ICcnfSAvPiBgIDogJyd9XG4gICAgICAgJHtmb3JlYWNoKGNvbHVtbnMsIChjb2x1bW4sIGNpKSA9PiB7XG4gICAgICAgICBjb25zdCBjb2x1bW5JbmRleCA9IHR5cGVvZiBjb2x1bW4uaW5kZXggPT09IFwibnVtYmVyXCIgPyBjb2x1bW4uaW5kZXggKyAxIDogKGNpICsgMSk7XG4gICAgICAgICBpZiAoY29sdW1uLndpZHRoID09PSAwKSB7XG4gICAgICAgICAgIHJldHVybiBgPGNvbCAke2RlZmF1bHRDZWxsU3R5bGVJZCAhPSBudWxsID8gYHN0eWxlPVwiJHtkZWZhdWx0Q2VsbFN0eWxlSWR9XCJgIDogJyd9XG4gICAgICAgICAgICAgICAgICAgICAgICBtaW49XCIke2NvbHVtbkluZGV4fVwiIG1heD1cIiR7Y29sdW1uSW5kZXh9XCIgaGlkZGVuPVwiMVwiIGN1c3RvbVdpZHRoPVwiMVwiIC8+YDtcbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBgPGNvbCAke2RlZmF1bHRDZWxsU3R5bGVJZCAhPSBudWxsID8gYHN0eWxlPVwiJHtkZWZhdWx0Q2VsbFN0eWxlSWR9XCJgIDogJyd9XG4gICAgICAgICAgICAgICAgICAgICAgbWluPVwiJHtjb2x1bW5JbmRleH1cIiBtYXg9XCIke2NvbHVtbkluZGV4fVwiIGN1c3RvbVdpZHRoPVwiMVwiXG4gICAgICAgICAgICAgICAgICAgICAgJHtjb2x1bW4uYXV0b1dpZHRoXG4gICAgICAgICAgICAgICAgICAgICAgICAgID8gYHdpZHRoPVwiJHsoKGNvbHVtbi53aWR0aCAqIDcgKyA1KSAvIDcgKiAyNTYpIC8gMjU2fVwiIGJlc3RGaXQ9XCIxXCJgXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogYHdpZHRoPVwiJHt0b1dpZHRoKGNvbHVtbi53aWR0aCl9XCJgfSAvPmA7XG4gICAgICAgfSl9XG4gICAgIDwvY29scz5gIDogJyd9XG5cbiAgIDxzaGVldERhdGE+XG4gICAgICR7Zm9yZWFjaChkYXRhLCAocm93LCByaSkgPT4ge1xuICAgICAgIGNvbnN0IHJvd0luZGV4ID0gdHlwZW9mIHJvdy5pbmRleCA9PT0gXCJudW1iZXJcIiA/IHJvdy5pbmRleCArIDEgOiAocmkgKyAxKTtcbiAgICAgICByZXR1cm4gYFxuICAgICAgICAgPHJvdyByPVwiJHtyb3dJbmRleH1cIiB4MTRhYzpkeURlc2NlbnQ9XCIwLjI1XCJcbiAgICAgICAgICAgICAgJHtyb3cuaGVpZ2h0ID09PSAwID8gJ2hpZGRlbj1cIjFcIidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogcm93LmhlaWdodCA/IGBodD1cIiR7dG9IZWlnaHQocm93LmhlaWdodCl9XCIgY3VzdG9tSGVpZ2h0PVwiMVwiYCA6IFwiXCJ9PlxuICAgICAgICAgICAke2ZvcmVhY2gocm93LmRhdGEsIChjZWxsKSA9PiBgXG4gICAgICAgICAgICAgPGMgcj1cIiR7Y2VsbC5yZWZ9XCIgJHtjZWxsLnN0eWxlID8gYHM9XCIke2NlbGwuc3R5bGV9XCJgIDogJyd9ICR7Y2VsbC50eXBlID8gYHQ9XCIke2NlbGwudHlwZX1cImAgOiAnJ30+XG4gICAgICAgICAgICAgICAke2NlbGwuZm9ybXVsYSAhPSBudWxsID8gd3JpdGVGb3JtdWxhKGNlbGwuZm9ybXVsYSkgOiAnJ31cbiAgICAgICAgICAgICAgICR7Y2VsbC52YWx1ZSAhPSBudWxsID8gYDx2PiR7RVNDKGNlbGwudmFsdWUpfTwvdj5gIDogJyd9XG4gICAgICAgICAgICAgPC9jPmApfVxuICAgICAgICAgPC9yb3c+XG4gICAgICAgYDt9KX1cbiAgIDwvc2hlZXREYXRhPlxuXG4gICAke2F1dG9GaWx0ZXIgPyBgPGF1dG9GaWx0ZXIgcmVmPVwiJHthdXRvRmlsdGVyLmZyb219OiR7YXV0b0ZpbHRlci50b31cIi8+YFxuICAgICAgICAgICAgICAgIDogZmlsdGVyID8gc3ByZWFkc2hlZXRGaWx0ZXJzKGZpbHRlcikgOiAnJ31cblxuICAgJHttZXJnZUNlbGxzLmxlbmd0aCA/IGBcbiAgICAgPG1lcmdlQ2VsbHMgY291bnQ9XCIke21lcmdlQ2VsbHMubGVuZ3RofVwiPlxuICAgICAgICR7Zm9yZWFjaChtZXJnZUNlbGxzLCAocmVmKSA9PiBgPG1lcmdlQ2VsbCByZWY9XCIke3JlZn1cIi8+YCl9XG4gICAgIDwvbWVyZ2VDZWxscz5gIDogJyd9XG5cbiAgICR7dmFsaWRhdGlvbnMubGVuZ3RoID8gYFxuICAgICA8ZGF0YVZhbGlkYXRpb25zPlxuICAgICAgICR7Zm9yZWFjaCh2YWxpZGF0aW9ucywgKHZhbCkgPT4gYFxuICAgICAgICAgPGRhdGFWYWxpZGF0aW9uIHNxcmVmPVwiJHt2YWwuc3FyZWYuam9pbihcIiBcIil9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICBzaG93RXJyb3JNZXNzYWdlPVwiJHt2YWwuc2hvd0Vycm9yTWVzc2FnZX1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCIke0VTQyh2YWwudHlwZSl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAkeyB2YWwudHlwZSAhPT0gXCJsaXN0XCIgPyBgb3BlcmF0b3I9XCIke0VTQyh2YWwub3BlcmF0b3IpfVwiYCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93Qmxhbms9XCIke3ZhbC5hbGxvd0JsYW5rfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0Ryb3BEb3duPVwiJHt2YWwuc2hvd0Ryb3BEb3dufVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgJHt2YWwuZXJyb3IgPyBgZXJyb3I9XCIke0VTQyh2YWwuZXJyb3IpfVwiYCA6ICcnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICR7dmFsLmVycm9yVGl0bGUgPyBgZXJyb3JUaXRsZT1cIiR7RVNDKHZhbC5lcnJvclRpdGxlKX1cImAgOiAnJ30+XG4gICAgICAgICAgICR7dmFsLmZvcm11bGExID8gYDxmb3JtdWxhMT4ke0VTQyh2YWwuZm9ybXVsYTEpfTwvZm9ybXVsYTE+YCA6ICcnfVxuICAgICAgICAgICAke3ZhbC5mb3JtdWxhMiA/IGA8Zm9ybXVsYTI+JHtFU0ModmFsLmZvcm11bGEyKX08L2Zvcm11bGEyPmAgOiAnJ31cbiAgICAgICAgIDwvZGF0YVZhbGlkYXRpb24+YCl9XG4gICAgIDwvZGF0YVZhbGlkYXRpb25zPmAgOiAnJ31cblxuICAgJHtoeXBlcmxpbmtzLmxlbmd0aCA/IGBcbiAgICAgPGh5cGVybGlua3M+XG4gICAgICAgJHtmb3JlYWNoKGh5cGVybGlua3MsIChsaW5rLCBoaSkgPT4gYFxuICAgICAgICAgPGh5cGVybGluayByZWY9XCIke2xpbmsucmVmfVwiIHI6aWQ9XCJySWQke2hpfVwiLz5gKX1cbiAgICAgPC9oeXBlcmxpbmtzPmAgOiAnJ31cblxuICAgPHBhZ2VNYXJnaW5zIGxlZnQ9XCIwLjdcIiByaWdodD1cIjAuN1wiIHRvcD1cIjAuNzVcIiBib3R0b209XCIwLjc1XCIgaGVhZGVyPVwiMC4zXCIgZm9vdGVyPVwiMC4zXCIgLz5cbjwvd29ya3NoZWV0PmA7XG5cbmNvbnN0IFdPUktCT09LX1JFTFMgPSAoeyBjb3VudCB9KSA9PiBgJHtYTUxIRUFEfVxuPFJlbGF0aW9uc2hpcHMgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L3JlbGF0aW9uc2hpcHNcIj5cbiAgJHtyZXBlYXQoY291bnQsIChpZHgpID0+IGBcbiAgICA8UmVsYXRpb25zaGlwIElkPVwicklkJHtpZHggKyAxfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3dvcmtzaGVldFwiIFRhcmdldD1cIndvcmtzaGVldHMvc2hlZXQke2lkeCArIDF9LnhtbFwiIC8+YCl9XG4gIDxSZWxhdGlvbnNoaXAgSWQ9XCJySWQke2NvdW50ICsgMX1cIiBUeXBlPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9zdHlsZXNcIiBUYXJnZXQ9XCJzdHlsZXMueG1sXCIgLz5cbiAgPFJlbGF0aW9uc2hpcCBJZD1cInJJZCR7Y291bnQgKyAyfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3NoYXJlZFN0cmluZ3NcIiBUYXJnZXQ9XCJzaGFyZWRTdHJpbmdzLnhtbFwiIC8+XG48L1JlbGF0aW9uc2hpcHM+YDtcblxuY29uc3QgV09SS1NIRUVUX1JFTFMgPSAoeyBoeXBlcmxpbmtzIH0pID0+IGAke1hNTEhFQUR9XG48UmVsYXRpb25zaGlwcyB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9wYWNrYWdlLzIwMDYvcmVsYXRpb25zaGlwc1wiPlxuICAke2ZvcmVhY2goaHlwZXJsaW5rcywgKGxpbmssIGkpID0+IGBcbiAgICA8UmVsYXRpb25zaGlwIElkPVwicklkJHtpfVwiIFR5cGU9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2h5cGVybGlua1wiIFRhcmdldD1cIiR7RVNDKGxpbmsudGFyZ2V0KX1cIiBUYXJnZXRNb2RlPVwiRXh0ZXJuYWxcIiAvPmApfVxuPC9SZWxhdGlvbnNoaXBzPmA7XG5cbmNvbnN0IFNIQVJFRF9TVFJJTkdTID0gKHsgY291bnQsIHVuaXF1ZUNvdW50LCBpbmRleGVzIH0pID0+IGAke1hNTEhFQUR9XG48c3N0IHhtbG5zPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3NwcmVhZHNoZWV0bWwvMjAwNi9tYWluXCIgY291bnQ9XCIke2NvdW50fVwiIHVuaXF1ZUNvdW50PVwiJHt1bmlxdWVDb3VudH1cIj5cbiAgJHtmb3JlYWNoKE9iamVjdC5rZXlzKGluZGV4ZXMpLCAoaW5kZXgpID0+IGBcbiAgICA8c2k+PHQgeG1sOnNwYWNlPVwicHJlc2VydmVcIj4ke0VTQyhpbmRleC5zdWJzdHJpbmcoMSkpfTwvdD48L3NpPmApfVxuPC9zc3Q+YDtcblxuY29uc3QgU1RZTEVTID0gKHtcbiAgICBmb3JtYXRzLFxuICAgIGZvbnRzLFxuICAgIGZpbGxzLFxuICAgIGJvcmRlcnMsXG4gICAgc3R5bGVzXG59KSA9PiBgJHtYTUxIRUFEfVxuPHN0eWxlU2hlZXRcbiAgICB4bWxucz1cImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9zcHJlYWRzaGVldG1sLzIwMDYvbWFpblwiXG4gICAgeG1sbnM6bWM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvbWFya3VwLWNvbXBhdGliaWxpdHkvMjAwNlwiXG4gICAgbWM6SWdub3JhYmxlPVwieDE0YWNcIlxuICAgIHhtbG5zOngxNGFjPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDA5LzkvYWNcIj5cbiAgPG51bUZtdHMgY291bnQ9XCIke2Zvcm1hdHMubGVuZ3RofVwiPlxuICAke2ZvcmVhY2goZm9ybWF0cywgKGZvcm1hdCwgZmkpID0+IGBcbiAgICA8bnVtRm10IGZvcm1hdENvZGU9XCIke0VTQyhmb3JtYXQuZm9ybWF0KX1cIiBudW1GbXRJZD1cIiR7MTY1ICsgZml9XCIgLz5gKX1cbiAgPC9udW1GbXRzPlxuICA8Zm9udHMgY291bnQ9XCIke2ZvbnRzLmxlbmd0aCArIDF9XCIgeDE0YWM6a25vd25Gb250cz1cIjFcIj5cbiAgICA8Zm9udD5cbiAgICAgICA8c3ogdmFsPVwiMTFcIiAvPlxuICAgICAgIDxjb2xvciB0aGVtZT1cIjFcIiAvPlxuICAgICAgIDxuYW1lIHZhbD1cIkNhbGlicmlcIiAvPlxuICAgICAgIDxmYW1pbHkgdmFsPVwiMlwiIC8+XG4gICAgICAgPHNjaGVtZSB2YWw9XCJtaW5vclwiIC8+XG4gICAgPC9mb250PlxuICAgICR7Zm9yZWFjaChmb250cywgKGZvbnQpID0+IGBcbiAgICA8Zm9udD5cbiAgICAgIDxzeiB2YWw9XCIke2ZvbnQuZm9udFNpemUgfHwgMTF9XCIgLz5cbiAgICAgICR7Zm9udC5ib2xkID8gJzxiLz4nIDogJyd9XG4gICAgICAke2ZvbnQuaXRhbGljID8gJzxpLz4nIDogJyd9XG4gICAgICAke2ZvbnQudW5kZXJsaW5lID8gJzx1Lz4nIDogJyd9XG4gICAgICAke2ZvbnQuY29sb3IgPyBgPGNvbG9yIHJnYj1cIiR7RVNDKGZvbnQuY29sb3IpfVwiIC8+YCA6ICc8Y29sb3IgdGhlbWU9XCIxXCIgLz4nfVxuICAgICAgJHtmb250LmZvbnRGYW1pbHkgPyBgXG4gICAgICAgIDxuYW1lIHZhbD1cIiR7RVNDKGZvbnQuZm9udEZhbWlseSl9XCIgLz5cbiAgICAgICAgPGZhbWlseSB2YWw9XCIyXCIgLz5cbiAgICAgIGAgOiBgXG4gICAgICAgIDxuYW1lIHZhbD1cIkNhbGlicmlcIiAvPlxuICAgICAgICA8ZmFtaWx5IHZhbD1cIjJcIiAvPlxuICAgICAgICA8c2NoZW1lIHZhbD1cIm1pbm9yXCIgLz5cbiAgICAgIGB9XG4gICAgPC9mb250PmApfVxuICA8L2ZvbnRzPlxuICA8ZmlsbHMgY291bnQ9XCIke2ZpbGxzLmxlbmd0aCArIDJ9XCI+XG4gICAgICA8ZmlsbD48cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJub25lXCIvPjwvZmlsbD5cbiAgICAgIDxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cImdyYXkxMjVcIi8+PC9maWxsPlxuICAgICR7Zm9yZWFjaChmaWxscywgKGZpbGwpID0+IGBcbiAgICAgICR7ZmlsbC5iYWNrZ3JvdW5kID8gYFxuICAgICAgICA8ZmlsbD5cbiAgICAgICAgICA8cGF0dGVybkZpbGwgcGF0dGVyblR5cGU9XCJzb2xpZFwiPlxuICAgICAgICAgICAgICA8ZmdDb2xvciByZ2I9XCIke0VTQyhmaWxsLmJhY2tncm91bmQpfVwiLz5cbiAgICAgICAgICA8L3BhdHRlcm5GaWxsPlxuICAgICAgICA8L2ZpbGw+XG4gICAgICBgIDogJyd9YCl9XG4gIDwvZmlsbHM+XG4gIDxib3JkZXJzIGNvdW50PVwiJHtib3JkZXJzLmxlbmd0aCArIDF9XCI+XG4gICAgPGJvcmRlcj48bGVmdC8+PHJpZ2h0Lz48dG9wLz48Ym90dG9tLz48ZGlhZ29uYWwvPjwvYm9yZGVyPlxuICAgICR7Zm9yZWFjaChib3JkZXJzLCBib3JkZXJUZW1wbGF0ZSl9XG4gIDwvYm9yZGVycz5cbiAgPGNlbGxTdHlsZVhmcyBjb3VudD1cIjFcIj5cbiAgICA8eGYgYm9yZGVySWQ9XCIwXCIgZmlsbElkPVwiMFwiIGZvbnRJZD1cIjBcIiAvPlxuICA8L2NlbGxTdHlsZVhmcz5cbiAgPGNlbGxYZnMgY291bnQ9XCIke3N0eWxlcy5sZW5ndGggKyAxfVwiPlxuICAgIDx4ZiBudW1GbXRJZD1cIjBcIiBmb250SWQ9XCIwXCIgZmlsbElkPVwiMFwiIGJvcmRlcklkPVwiMFwiIHhmSWQ9XCIwXCIgLz5cbiAgICAke2ZvcmVhY2goc3R5bGVzLCAoc3R5bGUpID0+IGBcbiAgICAgIDx4ZiB4ZklkPVwiMFwiXG4gICAgICAgICAgJHtzdHlsZS5mb250SWQgPyBgZm9udElkPVwiJHtzdHlsZS5mb250SWR9XCIgYXBwbHlGb250PVwiMVwiYCA6ICcnfVxuICAgICAgICAgICR7c3R5bGUuZmlsbElkID8gYGZpbGxJZD1cIiR7c3R5bGUuZmlsbElkfVwiIGFwcGx5RmlsbD1cIjFcImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLm51bUZtdElkID8gYG51bUZtdElkPVwiJHtzdHlsZS5udW1GbXRJZH1cIiBhcHBseU51bWJlckZvcm1hdD1cIjFcImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLnRleHRBbGlnbiB8fCBzdHlsZS52ZXJ0aWNhbEFsaWduIHx8IHN0eWxlLndyYXAgPyAnYXBwbHlBbGlnbm1lbnQ9XCIxXCInIDogJyd9XG4gICAgICAgICAgJHtzdHlsZS5ib3JkZXJJZCA/IGBib3JkZXJJZD1cIiR7c3R5bGUuYm9yZGVySWR9XCIgYXBwbHlCb3JkZXI9XCIxXCJgIDogJyd9PlxuICAgICAgICAke3N0eWxlLnRleHRBbGlnbiB8fCBzdHlsZS52ZXJ0aWNhbEFsaWduIHx8IHN0eWxlLndyYXAgPyBgXG4gICAgICAgIDxhbGlnbm1lbnRcbiAgICAgICAgICAke3N0eWxlLnRleHRBbGlnbiA/IGBob3Jpem9udGFsPVwiJHtFU0Moc3R5bGUudGV4dEFsaWduKX1cImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLnZlcnRpY2FsQWxpZ24gPyBgdmVydGljYWw9XCIke0VTQyhzdHlsZS52ZXJ0aWNhbEFsaWduKX1cImAgOiAnJ31cbiAgICAgICAgICAke3N0eWxlLndyYXAgPyAnd3JhcFRleHQ9XCIxXCInIDogJyd9IC8+XG4gICAgICAgIGAgOiAnJ31cbiAgICAgIDwveGY+XG4gICAgYCl9XG4gIDwvY2VsbFhmcz5cbiAgPGNlbGxTdHlsZXMgY291bnQ9XCIxXCI+XG4gICAgPGNlbGxTdHlsZSBuYW1lPVwiTm9ybWFsXCIgeGZJZD1cIjBcIiBidWlsdGluSWQ9XCIwXCIvPlxuICA8L2NlbGxTdHlsZXM+XG4gIDxkeGZzIGNvdW50PVwiMFwiIC8+XG4gIDx0YWJsZVN0eWxlcyBjb3VudD1cIjBcIiBkZWZhdWx0VGFibGVTdHlsZT1cIlRhYmxlU3R5bGVNZWRpdW0yXCIgZGVmYXVsdFBpdm90U3R5bGU9XCJQaXZvdFN0eWxlTWVkaXVtOVwiIC8+XG48L3N0eWxlU2hlZXQ+YDtcblxuZnVuY3Rpb24gd3JpdGVGb3JtdWxhKGZvcm11bGEpIHtcbiAgICBpZiAodHlwZW9mIGZvcm11bGEgPT0gXCJzdHJpbmdcIikge1xuICAgICAgICByZXR1cm4gYDxmPiR7RVNDKGZvcm11bGEpfTwvZj5gO1xuICAgIH1cbiAgICAvLyBhcnJheSBmb3JtdWxhc1xuICAgIHJldHVybiBgPGYgdD1cImFycmF5XCIgcmVmPVwiJHtmb3JtdWxhLnJlZn1cIj4ke0VTQyhmb3JtdWxhLnNyYyl9PC9mPmA7XG59XG5cbmZ1bmN0aW9uIG51bUNoYXIoY29sSW5kZXgpIHtcbiAgIGNvbnN0IGxldHRlciA9IE1hdGguZmxvb3IoY29sSW5kZXggLyAyNikgLSAxO1xuXG4gICByZXR1cm4gKGxldHRlciA+PSAwID8gbnVtQ2hhcihsZXR0ZXIpIDogXCJcIikgKyBTdHJpbmcuZnJvbUNoYXJDb2RlKDY1ICsgKGNvbEluZGV4ICUgMjYpKTtcbn1cblxuZnVuY3Rpb24gcmVmKHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgIHJldHVybiBudW1DaGFyKGNvbEluZGV4KSArIChyb3dJbmRleCArIDEpO1xufVxuXG5mdW5jdGlvbiAkcmVmKHJvd0luZGV4LCBjb2xJbmRleCkge1xuICAgIHJldHVybiBcIiRcIiArIG51bUNoYXIoY29sSW5kZXgpICsgXCIkXCIgKyAocm93SW5kZXggKyAxKTtcbn1cblxuZnVuY3Rpb24gZmlsdGVyUm93SW5kZXgob3B0aW9ucykge1xuICAgIGNvbnN0IGZyb3plblJvd3MgPSBvcHRpb25zLmZyb3plblJvd3MgfHwgKG9wdGlvbnMuZnJlZXplUGFuZSB8fCB7fSkucm93U3BsaXQgfHwgMTtcbiAgICByZXR1cm4gZnJvemVuUm93cyAtIDE7XG59XG5cbmZ1bmN0aW9uIHRvV2lkdGgocHgpIHtcbiAgICByZXR1cm4gKChweCAvIDcpICogMTAwICsgMC41KSAvIDEwMDtcbn1cblxuZnVuY3Rpb24gdG9IZWlnaHQocHgpIHtcbiAgICByZXR1cm4gcHggKiAwLjc1O1xufVxuXG5mdW5jdGlvbiBzdHJpcEZ1bm55Q2hhcnModmFsdWUpIHtcbiAgICByZXR1cm4gU3RyaW5nKHZhbHVlKVxuICAgICAgICAucmVwbGFjZSgvW1xceDAwLVxceDFGXS9nLCBcIlwiKVxuICAgICAgICAucmVwbGFjZSgvXFxuL2csIFwiXFxyXFxuXCIpO1xufVxuXG5jb25zdCBEQVRFX0VQT0NIID0gbmV3IERhdGUoMTkwMCwgMCwgMCk7XG5cbmNsYXNzIFdvcmtzaGVldCB7XG5cbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBzaGFyZWRTdHJpbmdzLCBzdHlsZXMsIGJvcmRlcnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICAgICAgdGhpcy5fc3RyaW5ncyA9IHNoYXJlZFN0cmluZ3M7XG4gICAgICAgIHRoaXMuX3N0eWxlcyA9IHN0eWxlcztcbiAgICAgICAgdGhpcy5fYm9yZGVycyA9IGJvcmRlcnM7XG4gICAgICAgIHRoaXMuX3ZhbGlkYXRpb25zID0ge307XG4gICAgfVxuXG4gICAgcmVsc1RvWE1MKCkge1xuICAgICAgICBjb25zdCBoeXBlcmxpbmtzID0gdGhpcy5vcHRpb25zLmh5cGVybGlua3MgfHwgW107XG4gICAgICAgIGlmICghaHlwZXJsaW5rcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFdPUktTSEVFVF9SRUxTKHsgaHlwZXJsaW5rczogaHlwZXJsaW5rcyB9KTtcbiAgICB9XG5cbiAgICB0b1hNTChpbmRleCkge1xuICAgICAgICBjb25zdCBtZXJnZUNlbGxzID0gdGhpcy5vcHRpb25zLm1lcmdlZENlbGxzIHx8IFtdO1xuICAgICAgICBjb25zdCByb3dzID0gdGhpcy5vcHRpb25zLnJvd3MgfHwgW107XG4gICAgICAgIGNvbnN0IGRhdGEgPSBpbmZsYXRlKHJvd3MsIG1lcmdlQ2VsbHMpO1xuXG4gICAgICAgIHRoaXMuX3JlYWRDZWxscyhkYXRhKTtcblxuICAgICAgICBsZXQgYXV0b0ZpbHRlciA9IHRoaXMub3B0aW9ucy5maWx0ZXI7XG4gICAgICAgIGxldCBmaWx0ZXI7XG4gICAgICAgIGlmIChhdXRvRmlsdGVyICYmICh0eXBlb2YgYXV0b0ZpbHRlci5mcm9tID09PSBcIm51bWJlclwiKSAmJiAodHlwZW9mIGF1dG9GaWx0ZXIudG8gPT09IFwibnVtYmVyXCIpKSB7XG4gICAgICAgICAgICAvLyBHcmlkIGVuYWJsZXMgYXV0byBmaWx0ZXJcbiAgICAgICAgICAgIGF1dG9GaWx0ZXIgPSB7XG4gICAgICAgICAgICAgICAgZnJvbTogcmVmKGZpbHRlclJvd0luZGV4KHRoaXMub3B0aW9ucyksIGF1dG9GaWx0ZXIuZnJvbSksXG4gICAgICAgICAgICAgICAgdG86IHJlZihmaWx0ZXJSb3dJbmRleCh0aGlzLm9wdGlvbnMpLCBhdXRvRmlsdGVyLnRvKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChhdXRvRmlsdGVyICYmIGF1dG9GaWx0ZXIucmVmICYmIGF1dG9GaWx0ZXIuY29sdW1ucykge1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBwcm9iYWJseSBmcm9tIHRoZSBTcHJlYWRzaGVldFxuICAgICAgICAgICAgZmlsdGVyID0gYXV0b0ZpbHRlcjtcbiAgICAgICAgICAgIGF1dG9GaWx0ZXIgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdmFsaWRhdGlvbnMgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSBpbiB0aGlzLl92YWxpZGF0aW9ucykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLl92YWxpZGF0aW9ucywgaSkpIHtcbiAgICAgICAgICAgICAgICB2YWxpZGF0aW9ucy5wdXNoKHRoaXMuX3ZhbGlkYXRpb25zW2ldKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkZWZhdWx0Q2VsbFN0eWxlSWQgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRlZmF1bHRDZWxsU3R5bGUpIHtcbiAgICAgICAgICAgIGRlZmF1bHRDZWxsU3R5bGVJZCA9IHRoaXMuX2xvb2t1cFN0eWxlKHRoaXMub3B0aW9ucy5kZWZhdWx0Q2VsbFN0eWxlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZyZWV6ZVBhbmUgPSB0aGlzLm9wdGlvbnMuZnJlZXplUGFuZSB8fCB7fTtcbiAgICAgICAgY29uc3QgZGVmYXVsdHMgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdHMgfHwge307XG4gICAgICAgIHJldHVybiBXT1JLU0hFRVQoe1xuICAgICAgICAgICAgZnJvemVuQ29sdW1uczogdGhpcy5vcHRpb25zLmZyb3plbkNvbHVtbnMgfHwgZnJlZXplUGFuZS5jb2xTcGxpdCxcbiAgICAgICAgICAgIGZyb3plblJvd3M6IHRoaXMub3B0aW9ucy5mcm96ZW5Sb3dzIHx8IGZyZWV6ZVBhbmUucm93U3BsaXQsXG4gICAgICAgICAgICBjb2x1bW5zOiB0aGlzLm9wdGlvbnMuY29sdW1ucyxcbiAgICAgICAgICAgIGRlZmF1bHRzOiBkZWZhdWx0cyxcbiAgICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgICAgICBtZXJnZUNlbGxzOiBtZXJnZUNlbGxzLFxuICAgICAgICAgICAgYXV0b0ZpbHRlcjogYXV0b0ZpbHRlcixcbiAgICAgICAgICAgIGZpbHRlcjogZmlsdGVyLFxuICAgICAgICAgICAgc2hvd0dyaWRMaW5lczogdGhpcy5vcHRpb25zLnNob3dHcmlkTGluZXMsXG4gICAgICAgICAgICBoeXBlcmxpbmtzOiB0aGlzLm9wdGlvbnMuaHlwZXJsaW5rcyB8fCBbXSxcbiAgICAgICAgICAgIHZhbGlkYXRpb25zOiB2YWxpZGF0aW9ucyxcbiAgICAgICAgICAgIGRlZmF1bHRDZWxsU3R5bGVJZDogZGVmYXVsdENlbGxTdHlsZUlkLFxuICAgICAgICAgICAgcnRsOiB0aGlzLm9wdGlvbnMucnRsICE9PSB1bmRlZmluZWQgPyB0aGlzLm9wdGlvbnMucnRsIDogZGVmYXVsdHMucnRsXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9sb29rdXBTdHJpbmcodmFsdWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gXCIkXCIgKyB2YWx1ZTtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLl9zdHJpbmdzLmluZGV4ZXNba2V5XTtcbiAgICAgICAgbGV0IHJlc3VsdDtcblxuICAgICAgICBpZiAoaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmVzdWx0ID0gaW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLl9zdHJpbmdzLmluZGV4ZXNba2V5XSA9IHRoaXMuX3N0cmluZ3MudW5pcXVlQ291bnQ7XG4gICAgICAgICAgICB0aGlzLl9zdHJpbmdzLnVuaXF1ZUNvdW50ICsrO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc3RyaW5ncy5jb3VudCArKztcblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIF9sb29rdXBTdHlsZShzdHlsZSkge1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoc3R5bGUpO1xuXG4gICAgICAgIGlmIChqc29uID09PSBcInt9XCIpIHtcbiAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGluZGV4ID0gaW5kZXhPZihqc29uLCB0aGlzLl9zdHlsZXMpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fc3R5bGVzLnB1c2goanNvbikgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlcmUgaXMgb25lIGRlZmF1bHQgc3R5bGVcbiAgICAgICAgcmV0dXJuIGluZGV4ICsgMTtcbiAgICB9XG5cbiAgICBfbG9va3VwQm9yZGVyKGJvcmRlcikge1xuICAgICAgICBjb25zdCBqc29uID0gSlNPTi5zdHJpbmdpZnkoYm9yZGVyKTtcbiAgICAgICAgaWYgKGpzb24gPT09IFwie31cIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGluZGV4ID0gaW5kZXhPZihqc29uLCB0aGlzLl9ib3JkZXJzKTtcbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLl9ib3JkZXJzLnB1c2goanNvbikgLSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVGhlcmUgaXMgb25lIGRlZmF1bHQgYm9yZGVyXG4gICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgfVxuXG4gICAgX3JlYWRDZWxscyhyb3dEYXRhKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgcm93ID0gcm93RGF0YVtpXTtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxzID0gcm93LmNlbGxzO1xuXG4gICAgICAgICAgICByb3cuZGF0YSA9IFtdO1xuXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNlbGxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2VsbERhdGEgPSB0aGlzLl9jZWxsKGNlbGxzW2pdLCByb3cuaW5kZXgsIGopO1xuICAgICAgICAgICAgICAgIGlmIChjZWxsRGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByb3cuZGF0YS5wdXNoKGNlbGxEYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBfY2VsbChkYXRhLCByb3dJbmRleCwgY2VsbEluZGV4KSB7XG4gICAgICAgIGlmICghZGF0YSB8fCBkYXRhID09PSBFTVBUWV9DRUxMKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB2YWx1ZSA9IGRhdGEudmFsdWU7XG5cbiAgICAgICAgbGV0IGJvcmRlciA9IHt9O1xuXG4gICAgICAgIGlmIChkYXRhLmJvcmRlckxlZnQpIHtcbiAgICAgICAgICAgIGJvcmRlci5sZWZ0ID0gZGF0YS5ib3JkZXJMZWZ0O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEuYm9yZGVyUmlnaHQpIHtcbiAgICAgICAgICAgIGJvcmRlci5yaWdodCA9IGRhdGEuYm9yZGVyUmlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS5ib3JkZXJUb3ApIHtcbiAgICAgICAgICAgIGJvcmRlci50b3AgPSBkYXRhLmJvcmRlclRvcDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkYXRhLmJvcmRlckJvdHRvbSkge1xuICAgICAgICAgICAgYm9yZGVyLmJvdHRvbSA9IGRhdGEuYm9yZGVyQm90dG9tO1xuICAgICAgICB9XG5cbiAgICAgICAgYm9yZGVyID0gdGhpcy5fbG9va3VwQm9yZGVyKGJvcmRlcik7XG5cbiAgICAgICAgY29uc3QgZGVmU3R5bGUgPSB0aGlzLm9wdGlvbnMuZGVmYXVsdENlbGxTdHlsZSB8fCB7fTtcbiAgICAgICAgbGV0IHN0eWxlID0geyBib3JkZXJJZDogYm9yZGVyIH07XG5cbiAgICAgICAgKGZ1bmN0aW9uKGFkZCkge1xuICAgICAgICAgICAgYWRkKFwiY29sb3JcIik7XG4gICAgICAgICAgICBhZGQoXCJiYWNrZ3JvdW5kXCIpO1xuICAgICAgICAgICAgYWRkKFwiYm9sZFwiKTtcbiAgICAgICAgICAgIGFkZChcIml0YWxpY1wiKTtcbiAgICAgICAgICAgIGFkZChcInVuZGVybGluZVwiKTtcbiAgICAgICAgICAgIGlmICghYWRkKFwiZm9udEZhbWlseVwiKSkgeyBhZGQoXCJmb250TmFtZVwiLCBcImZvbnRGYW1pbHlcIik7IH1cbiAgICAgICAgICAgIGFkZChcImZvbnRTaXplXCIpO1xuICAgICAgICAgICAgYWRkKFwiZm9ybWF0XCIpO1xuICAgICAgICAgICAgaWYgKCFhZGQoXCJ0ZXh0QWxpZ25cIikpIHsgYWRkKFwiaEFsaWduXCIsIFwidGV4dEFsaWduXCIpOyB9XG4gICAgICAgICAgICBpZiAoIWFkZChcInZlcnRpY2FsQWxpZ25cIikpIHsgYWRkKFwidkFsaWduXCIsIFwidmVydGljYWxBbGlnblwiKTsgfVxuICAgICAgICAgICAgYWRkKFwid3JhcFwiKTtcbiAgICAgICAgfSkoXG4gICAgICAgICAgICBmdW5jdGlvbihwcm9wLCB0YXJnZXQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdmFsID0gZGF0YVtwcm9wXTtcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsID0gZGVmU3R5bGVbcHJvcF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBzdHlsZVt0YXJnZXQgfHwgcHJvcF0gPSB2YWw7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBjb2x1bW5zID0gdGhpcy5vcHRpb25zLmNvbHVtbnMgfHwgW107XG5cbiAgICAgICAgY29uc3QgY29sdW1uID0gY29sdW1uc1tjZWxsSW5kZXhdO1xuICAgICAgICBsZXQgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcblxuICAgICAgICBpZiAoY29sdW1uICYmIGNvbHVtbi5hdXRvV2lkdGgpIHtcbiAgICAgICAgICAgIGxldCBkaXNwbGF5VmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAgICAgLy8gWFhYOiBsZXQncyBub3QgYnJpbmcga2VuZG8udG9TdHJpbmcgaW4gb25seSBmb3IgdGhpcy5cbiAgICAgICAgICAgIC8vICAgICAgYmV0dGVyIHdhaXQgdW50aWwgdGhlIHNwcmVhZHNoZWV0IGVuZ2luZSBpcyBhdmFpbGFibGUgYXMgYSBzZXBhcmF0ZVxuICAgICAgICAgICAgLy8gICAgICBjb21wb25lbnQsIHRoZW4gd2UgY2FuIHVzZSBhIHJlYWwgRXhjZWwtbGlrZSBmb3JtYXR0ZXIuXG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAvLyBrZW5kby50b1N0cmluZyB3aWxsIG5vdCBiZWhhdmUgZXhhY3RseSBsaWtlIHRoZSBFeGNlbCBmb3JtYXRcbiAgICAgICAgICAgICAgICAvLyBTdGlsbCwgaXQncyB0aGUgYmVzdCB3ZSBoYXZlIGF2YWlsYWJsZSBmb3IgZXN0aW1hdGluZyB0aGUgY2hhcmFjdGVyIGNvdW50LlxuICAgICAgICAgICAgICAgIGRpc3BsYXlWYWx1ZSA9IEludGxTZXJ2aWNlLnRvU3RyaW5nKHZhbHVlLCBkYXRhLmZvcm1hdCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbHVtbi53aWR0aCA9IE1hdGgubWF4KGNvbHVtbi53aWR0aCB8fCAwLCBTdHJpbmcoZGlzcGxheVZhbHVlKS5sZW5ndGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHZhbHVlID0gc3RyaXBGdW5ueUNoYXJzKHZhbHVlKTtcbiAgICAgICAgICAgIHZhbHVlID0gdGhpcy5fbG9va3VwU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICAgIHR5cGUgPSBcInNcIjtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICB0eXBlID0gXCJuXCI7XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgICAgICAgIHR5cGUgPSBcImJcIjtcbiAgICAgICAgICAgIHZhbHVlID0gTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSAmJiB2YWx1ZS5nZXRUaW1lKSB7XG4gICAgICAgICAgICB0eXBlID0gbnVsbDtcblxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gKHZhbHVlLmdldFRpbWV6b25lT2Zmc2V0KCkgLSBEQVRFX0VQT0NILmdldFRpbWV6b25lT2Zmc2V0KCkpICogTVNfUEVSX01JTlVURTtcbiAgICAgICAgICAgIHZhbHVlID0gKHZhbHVlIC0gREFURV9FUE9DSCAtIG9mZnNldCkgLyBNU19QRVJfREFZICsgMTtcblxuICAgICAgICAgICAgaWYgKCFzdHlsZS5mb3JtYXQpIHtcbiAgICAgICAgICAgICAgICBzdHlsZS5mb3JtYXQgPSBcIm1tLWRkLXl5XCI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0eXBlID0gbnVsbDtcbiAgICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0eWxlID0gdGhpcy5fbG9va3VwU3R5bGUoc3R5bGUpO1xuXG4gICAgICAgIGNvbnN0IGNlbGxOYW1lID0gcmVmKHJvd0luZGV4LCBjZWxsSW5kZXgpO1xuXG4gICAgICAgIGlmIChkYXRhLnZhbGlkYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX2FkZFZhbGlkYXRpb24oZGF0YS52YWxpZGF0aW9uLCBjZWxsTmFtZSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgZm9ybXVsYTogZGF0YS5mb3JtdWxhLFxuICAgICAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgICAgIHN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgIHJlZjogY2VsbE5hbWVcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBfYWRkVmFsaWRhdGlvbih2LCByZWYpIHtcbiAgICAgICAgY29uc3QgdG1wID0ge1xuICAgICAgICAgICAgc2hvd0Vycm9yTWVzc2FnZSA6IHYudHlwZSA9PT0gXCJyZWplY3RcIiA/IDEgOiAwLFxuICAgICAgICAgICAgZm9ybXVsYTEgICAgICAgICA6IHYuZnJvbSxcbiAgICAgICAgICAgIGZvcm11bGEyICAgICAgICAgOiB2LnRvLFxuICAgICAgICAgICAgdHlwZSAgICAgICAgICAgICA6IE1BUF9FWENFTF9UWVBFW3YuZGF0YVR5cGVdIHx8IHYuZGF0YVR5cGUsXG4gICAgICAgICAgICBvcGVyYXRvciAgICAgICAgIDogTUFQX0VYQ0VMX09QRVJBVE9SW3YuY29tcGFyZXJUeXBlXSB8fCB2LmNvbXBhcmVyVHlwZSxcbiAgICAgICAgICAgIGFsbG93QmxhbmsgICAgICAgOiB2LmFsbG93TnVsbHMgPyAxIDogMCxcbiAgICAgICAgICAgIHNob3dEcm9wRG93biAgICAgOiB2LnNob3dCdXR0b24gPyAwIDogMSwgLy8gTE9MLCBFeGNlbCFcbiAgICAgICAgICAgIGVycm9yICAgICAgICAgICAgOiB2Lm1lc3NhZ2VUZW1wbGF0ZSxcbiAgICAgICAgICAgIGVycm9yVGl0bGUgICAgICAgOiB2LnRpdGxlVGVtcGxhdGVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04uc3RyaW5naWZ5KHRtcCk7XG4gICAgICAgIGlmICghdGhpcy5fdmFsaWRhdGlvbnNbanNvbl0pIHtcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25zW2pzb25dID0gdG1wO1xuICAgICAgICAgICAgdG1wLnNxcmVmID0gW107XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fdmFsaWRhdGlvbnNbanNvbl0uc3FyZWYucHVzaChyZWYpO1xuICAgIH1cbn1cblxuY29uc3QgTUFQX0VYQ0VMX09QRVJBVE9SID0ge1xuICAgIC8vIGluY2x1ZGVzIG9ubHkgd2hhdCBkaWZmZXJzOyBrZXkgaXMgb3VyIG9wZXJhdG9yLCB2YWx1ZSBpcyBFeGNlbFxuICAgIC8vIG9wZXJhdG9yLlxuICAgIGdyZWF0ZXJUaGFuT3JFcXVhbFRvIDogXCJncmVhdGVyVGhhbk9yRXF1YWxcIixcbiAgICBsZXNzVGhhbk9yRXF1YWxUbyAgICA6IFwibGVzc1RoYW5PckVxdWFsXCJcbn07XG5cbmNvbnN0IE1BUF9FWENFTF9UWVBFID0ge1xuICAgIG51bWJlcjogXCJkZWNpbWFsXCJcbn07XG5cbmNvbnN0IGRlZmF1bHRGb3JtYXRzID0ge1xuICAgIFwiR2VuZXJhbFwiOiAwLFxuICAgIFwiMFwiOiAxLFxuICAgIFwiMC4wMFwiOiAyLFxuICAgIFwiIywjIzBcIjogMyxcbiAgICBcIiMsIyMwLjAwXCI6IDQsXG4gICAgXCIwJVwiOiA5LFxuICAgIFwiMC4wMCVcIjogMTAsXG4gICAgXCIwLjAwRSswMFwiOiAxMSxcbiAgICBcIiMgPy8/XCI6IDEyLFxuICAgIFwiIyA/Py8/P1wiOiAxMyxcbiAgICBcIm1tLWRkLXl5XCI6IDE0LFxuICAgIFwiZC1tbW0teXlcIjogMTUsXG4gICAgXCJkLW1tbVwiOiAxNixcbiAgICBcIm1tbS15eVwiOiAxNyxcbiAgICBcImg6bW0gQU0vUE1cIjogMTgsXG4gICAgXCJoOm1tOnNzIEFNL1BNXCI6IDE5LFxuICAgIFwiaDptbVwiOiAyMCxcbiAgICBcImg6bW06c3NcIjogMjEsXG4gICAgXCJtL2QveXkgaDptbVwiOiAyMixcbiAgICBcIiMsIyMwIDsoIywjIzApXCI6IDM3LFxuICAgIFwiIywjIzAgO1tSZWRdKCMsIyMwKVwiOiAzOCxcbiAgICBcIiMsIyMwLjAwOygjLCMjMC4wMClcIjogMzksXG4gICAgXCIjLCMjMC4wMDtbUmVkXSgjLCMjMC4wMClcIjogNDAsXG4gICAgXCJtbTpzc1wiOiA0NSxcbiAgICBcIltoXTptbTpzc1wiOiA0NixcbiAgICBcIm1tc3MuMFwiOiA0NyxcbiAgICBcIiMjMC4wRSswXCI6IDQ4LFxuICAgIFwiQFwiOiA0OSxcbiAgICBcIlskLTQwNF1lL20vZFwiOiAyNyxcbiAgICBcIm0vZC95eVwiOiAzMCxcbiAgICBcInQwXCI6IDU5LFxuICAgIFwidDAuMDBcIjogNjAsXG4gICAgXCJ0IywjIzBcIjogNjEsXG4gICAgXCJ0IywjIzAuMDBcIjogNjIsXG4gICAgXCJ0MCVcIjogNjcsXG4gICAgXCJ0MC4wMCVcIjogNjgsXG4gICAgXCJ0IyA/Lz9cIjogNjksXG4gICAgXCJ0IyA/Py8/P1wiOiA3MFxufTtcblxuZnVuY3Rpb24gY29udmVydENvbG9yKHZhbHVlKSB7XG4gICAgbGV0IGNvbG9yID0gdmFsdWU7XG4gICAgaWYgKGNvbG9yLmxlbmd0aCA8IDYpIHtcbiAgICAgICAgY29sb3IgPSBjb2xvci5yZXBsYWNlKC8oXFx3KS9nLCBmdW5jdGlvbigkMCwgJDEpIHtcbiAgICAgICAgICAgIHJldHVybiAkMSArICQxO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjb2xvciA9IGNvbG9yLnN1YnN0cmluZygxKS50b1VwcGVyQ2FzZSgpO1xuXG4gICAgaWYgKGNvbG9yLmxlbmd0aCA8IDgpIHtcbiAgICAgICAgY29sb3IgPSBcIkZGXCIgKyBjb2xvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gY29sb3I7XG59XG5cbmNsYXNzIFdvcmtib29rIHtcblxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgdGhpcy5fc3RyaW5ncyA9IHtcbiAgICAgICAgICAgIGluZGV4ZXM6IHt9LFxuICAgICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgICB1bmlxdWVDb3VudDogMFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLl9zdHlsZXMgPSBbXTtcbiAgICAgICAgdGhpcy5fYm9yZGVycyA9IFtdO1xuXG4gICAgICAgIHRoaXMuX3NoZWV0cyA9IG1hcCh0aGlzLm9wdGlvbnMuc2hlZXRzIHx8IFtdLCAob3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgb3B0aW9ucy5kZWZhdWx0cyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgICAgIHJldHVybiBuZXcgV29ya3NoZWV0KG9wdGlvbnMsIHRoaXMuX3N0cmluZ3MsIHRoaXMuX3N0eWxlcywgdGhpcy5fYm9yZGVycyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHRvWklQKCkge1xuICAgICAgICBjb25zdCB6aXAgPSBjcmVhdGVaaXAoKTtcblxuICAgICAgICBjb25zdCBkb2NQcm9wcyA9IHppcC5mb2xkZXIoXCJkb2NQcm9wc1wiKTtcblxuICAgICAgICBkb2NQcm9wcy5maWxlKFwiY29yZS54bWxcIiwgQ09SRSh7XG4gICAgICAgICAgICBjcmVhdG9yOiB0aGlzLm9wdGlvbnMuY3JlYXRvciB8fCBcIktlbmRvIFVJXCIsXG4gICAgICAgICAgICBsYXN0TW9kaWZpZWRCeTogdGhpcy5vcHRpb25zLmNyZWF0b3IgfHwgXCJLZW5kbyBVSVwiLFxuICAgICAgICAgICAgY3JlYXRlZDogdGhpcy5vcHRpb25zLmRhdGUgfHwgbmV3IERhdGUoKS50b0pTT04oKSxcbiAgICAgICAgICAgIG1vZGlmaWVkOiB0aGlzLm9wdGlvbnMuZGF0ZSB8fCBuZXcgRGF0ZSgpLnRvSlNPTigpXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCBzaGVldENvdW50ID0gdGhpcy5fc2hlZXRzLmxlbmd0aDtcblxuICAgICAgICBkb2NQcm9wcy5maWxlKFwiYXBwLnhtbFwiLCBBUFAoeyBzaGVldHM6IHRoaXMuX3NoZWV0cyB9KSk7XG5cbiAgICAgICAgY29uc3QgcmVscyA9IHppcC5mb2xkZXIoXCJfcmVsc1wiKTtcbiAgICAgICAgcmVscy5maWxlKFwiLnJlbHNcIiwgUkVMUyk7XG5cbiAgICAgICAgY29uc3QgeGwgPSB6aXAuZm9sZGVyKFwieGxcIik7XG5cbiAgICAgICAgY29uc3QgeGxSZWxzID0geGwuZm9sZGVyKFwiX3JlbHNcIik7XG4gICAgICAgIHhsUmVscy5maWxlKFwid29ya2Jvb2sueG1sLnJlbHNcIiwgV09SS0JPT0tfUkVMUyh7IGNvdW50OiBzaGVldENvdW50IH0pKTtcblxuICAgICAgICBjb25zdCBzaGVldElkcyA9IHt9O1xuXG4gICAgICAgIHhsLmZpbGUoXCJ3b3JrYm9vay54bWxcIiwgV09SS0JPT0soe1xuICAgICAgICAgICAgc2hlZXRzOiB0aGlzLl9zaGVldHMsXG4gICAgICAgICAgICBmaWx0ZXJOYW1lczogbWFwKHRoaXMuX3NoZWV0cywgZnVuY3Rpb24oc2hlZXQsIGluZGV4KSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHNoZWV0Lm9wdGlvbnM7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gKG9wdGlvbnMubmFtZSB8fCBvcHRpb25zLnRpdGxlIHx8IFwiU2hlZXRcIiArIChpbmRleCArIDEpKTtcbiAgICAgICAgICAgICAgICBzaGVldElkc1tzaGVldE5hbWUudG9Mb3dlckNhc2UoKV0gPSBpbmRleDtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICAgICAgICAgICAgICBpZiAoZmlsdGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWx0ZXIucmVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzcHJlYWRzaGVldCBwcm92aWRlcyBgcmVmYFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGEgPSBmaWx0ZXIucmVmLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmcm9tID0gcGFyc2VSZWYoYVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG8gPSBwYXJzZVJlZihhWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTaGVldElkOiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogJHJlZihmcm9tLnJvdywgZnJvbS5jb2wpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAkcmVmKHRvLnJvdywgdG8uY29sKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZmlsdGVyLmZyb20gIT09IFwidW5kZWZpbmVkXCIgJiYgdHlwZW9mIGZpbHRlci50byAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZ3JpZCBkb2VzIHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTaGVldElkOiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldE5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnJvbTogJHJlZihmaWx0ZXJSb3dJbmRleChvcHRpb25zKSwgZmlsdGVyLmZyb20pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvOiAkcmVmKGZpbHRlclJvd0luZGV4KG9wdGlvbnMpLCBmaWx0ZXIudG8pXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB1c2VyTmFtZXM6IG1hcCh0aGlzLm9wdGlvbnMubmFtZXMgfHwgW10sIGZ1bmN0aW9uKGRlZikge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGRlZi5sb2NhbE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU2hlZXRJZDogZGVmLnNoZWV0ID8gc2hlZXRJZHNbZGVmLnNoZWV0LnRvTG93ZXJDYXNlKCldIDogbnVsbCxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGRlZi52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgaGlkZGVuOiBkZWYuaGlkZGVuXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pKTtcblxuICAgICAgICBjb25zdCB3b3Jrc2hlZXRzID0geGwuZm9sZGVyKFwid29ya3NoZWV0c1wiKTtcblxuICAgICAgICBjb25zdCBzaGVldFJlbHMgPSB3b3Jrc2hlZXRzLmZvbGRlcihcIl9yZWxzXCIpO1xuXG4gICAgICAgIGZvciAobGV0IGlkeCA9IDA7IGlkeCA8IHNoZWV0Q291bnQ7IGlkeCsrKSB7XG4gICAgICAgICAgICBjb25zdCBzaGVldCA9IHRoaXMuX3NoZWV0c1tpZHhdO1xuICAgICAgICAgICAgY29uc3Qgc2hlZXROYW1lID0gYHNoZWV0JHtpZHggKyAxfS54bWxgO1xuICAgICAgICAgICAgY29uc3QgcmVsc1htbCA9IHNoZWV0LnJlbHNUb1hNTCgpO1xuXG4gICAgICAgICAgICBpZiAocmVsc1htbCkge1xuICAgICAgICAgICAgICAgIHNoZWV0UmVscy5maWxlKHNoZWV0TmFtZSArIFwiLnJlbHNcIiwgcmVsc1htbCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHdvcmtzaGVldHMuZmlsZShzaGVldE5hbWUsIHNoZWV0LnRvWE1MKGlkeCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYm9yZGVycyA9IG1hcCh0aGlzLl9ib3JkZXJzLCBwYXJzZUpTT04pO1xuXG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IG1hcCh0aGlzLl9zdHlsZXMsIHBhcnNlSlNPTik7XG5cbiAgICAgICAgY29uc3QgaGFzRm9udCA9IGZ1bmN0aW9uKHN0eWxlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3R5bGUudW5kZXJsaW5lIHx8IHN0eWxlLmJvbGQgfHwgc3R5bGUuaXRhbGljIHx8IHN0eWxlLmNvbG9yIHx8IHN0eWxlLmZvbnRGYW1pbHkgfHwgc3R5bGUuZm9udFNpemU7XG4gICAgICAgIH07XG5cbiAgICAgICAgY29uc3QgZm9udHMgPSBtYXAoc3R5bGVzLCBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgaWYgKHN0eWxlLmNvbG9yKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuY29sb3IgPSBjb252ZXJ0Q29sb3Ioc3R5bGUuY29sb3IpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaGFzRm9udChzdHlsZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGZvcm1hdHMgPSBtYXAoc3R5bGVzLCBmdW5jdGlvbihzdHlsZSkge1xuICAgICAgICAgICAgaWYgKHN0eWxlLmZvcm1hdCAmJiBkZWZhdWx0Rm9ybWF0c1tzdHlsZS5mb3JtYXRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGZpbGxzID0gbWFwKHN0eWxlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgIGlmIChzdHlsZS5iYWNrZ3JvdW5kKSB7XG4gICAgICAgICAgICAgICAgc3R5bGUuYmFja2dyb3VuZCA9IGNvbnZlcnRDb2xvcihzdHlsZS5iYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHhsLmZpbGUoXCJzdHlsZXMueG1sXCIsIFNUWUxFUyh7XG4gICAgICAgICAgICBmb250czogZm9udHMsXG4gICAgICAgICAgICBmaWxsczogZmlsbHMsXG4gICAgICAgICAgICBmb3JtYXRzOiBmb3JtYXRzLFxuICAgICAgICAgICAgYm9yZGVyczogYm9yZGVycyxcbiAgICAgICAgICAgIHN0eWxlczogbWFwKHN0eWxlcywgZnVuY3Rpb24oc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7fTtcblxuICAgICAgICAgICAgICAgIGlmIChoYXNGb250KHN0eWxlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZm9udElkID0gaW5kZXhPZihzdHlsZSwgZm9udHMpICsgMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuYmFja2dyb3VuZCkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQuZmlsbElkID0gaW5kZXhPZihzdHlsZSwgZmlsbHMpICsgMjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXN1bHQudGV4dEFsaWduID0gc3R5bGUudGV4dEFsaWduO1xuICAgICAgICAgICAgICAgIHJlc3VsdC52ZXJ0aWNhbEFsaWduID0gc3R5bGUudmVydGljYWxBbGlnbjtcbiAgICAgICAgICAgICAgICByZXN1bHQud3JhcCA9IHN0eWxlLndyYXA7XG4gICAgICAgICAgICAgICAgcmVzdWx0LmJvcmRlcklkID0gc3R5bGUuYm9yZGVySWQ7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3R5bGUuZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZhdWx0Rm9ybWF0c1tzdHlsZS5mb3JtYXRdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdC5udW1GbXRJZCA9IGRlZmF1bHRGb3JtYXRzW3N0eWxlLmZvcm1hdF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQubnVtRm10SWQgPSAxNjUgKyBpbmRleE9mKHN0eWxlLCBmb3JtYXRzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KSk7XG5cbiAgICAgICAgeGwuZmlsZShcInNoYXJlZFN0cmluZ3MueG1sXCIsIFNIQVJFRF9TVFJJTkdTKHRoaXMuX3N0cmluZ3MpKTtcblxuICAgICAgICB6aXAuZmlsZShcIltDb250ZW50X1R5cGVzXS54bWxcIiwgQ09OVEVOVF9UWVBFUyggeyBjb3VudDogc2hlZXRDb3VudCB9KSk7XG5cbiAgICAgICAgcmV0dXJuIHppcDtcbiAgICB9XG5cbiAgICB0b0RhdGFVUkwoKSB7XG4gICAgICAgIGNvbnN0IHppcCA9IHRoaXMudG9aSVAoKTtcblxuICAgICAgICByZXR1cm4gemlwLmdlbmVyYXRlQXN5bmMgPyB6aXAuZ2VuZXJhdGVBc3luYyhEQVRBX1VSTF9PUFRJT05TKS50aGVuKHRvRGF0YVVSSSkgOiB0b0RhdGFVUkkoemlwLmdlbmVyYXRlKERBVEFfVVJMX09QVElPTlMpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGJvcmRlclN0eWxlKHdpZHRoKSB7XG4gICAgbGV0IGFsaWFzID0gXCJ0aGluXCI7XG5cbiAgICBpZiAod2lkdGggPT09IDIpIHtcbiAgICAgICAgYWxpYXMgPSBcIm1lZGl1bVwiO1xuICAgIH0gZWxzZSBpZiAod2lkdGggPT09IDMpIHtcbiAgICAgICAgYWxpYXMgPSBcInRoaWNrXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIGFsaWFzO1xufVxuXG5mdW5jdGlvbiBib3JkZXJTaWRlVGVtcGxhdGUobmFtZSwgc3R5bGUpIHtcbiAgICBsZXQgcmVzdWx0ID0gXCJcIjtcblxuICAgIGlmIChzdHlsZSkge1xuICAgICAgICByZXN1bHQgKz0gXCI8XCIgKyBuYW1lICsgXCIgc3R5bGU9XFxcIlwiICsgYm9yZGVyU3R5bGUoc3R5bGUuc2l6ZSkgKyBcIlxcXCI+XCI7XG4gICAgICAgIGlmIChzdHlsZS5jb2xvcikge1xuICAgICAgICAgICAgcmVzdWx0ICs9IFwiPGNvbG9yIHJnYj1cXFwiXCIgKyBjb252ZXJ0Q29sb3Ioc3R5bGUuY29sb3IpICsgXCJcXFwiLz5cIjtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gXCI8L1wiICsgbmFtZSArIFwiPlwiO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGJvcmRlclRlbXBsYXRlKGJvcmRlcikge1xuICAgIHJldHVybiBcIjxib3JkZXI+XCIgK1xuICAgICAgIGJvcmRlclNpZGVUZW1wbGF0ZShcImxlZnRcIiwgYm9yZGVyLmxlZnQpICtcbiAgICAgICBib3JkZXJTaWRlVGVtcGxhdGUoXCJyaWdodFwiLCBib3JkZXIucmlnaHQpICtcbiAgICAgICBib3JkZXJTaWRlVGVtcGxhdGUoXCJ0b3BcIiwgYm9yZGVyLnRvcCkgK1xuICAgICAgIGJvcmRlclNpZGVUZW1wbGF0ZShcImJvdHRvbVwiLCBib3JkZXIuYm90dG9tKSArXG4gICBcIjwvYm9yZGVyPlwiO1xufVxuXG5jb25zdCBFTVBUWV9DRUxMID0ge307XG5mdW5jdGlvbiBpbmZsYXRlKHJvd3MsIG1lcmdlZENlbGxzKSB7XG4gICAgY29uc3Qgcm93RGF0YSA9IFtdO1xuICAgIGNvbnN0IHJvd3NCeUluZGV4ID0gW107XG5cbiAgICBpbmRleFJvd3Mocm93cywgZnVuY3Rpb24ocm93LCBpbmRleCkge1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgX3NvdXJjZTogcm93LFxuICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgaGVpZ2h0OiByb3cuaGVpZ2h0LFxuICAgICAgICAgICAgY2VsbHM6IFtdXG4gICAgICAgIH07XG5cbiAgICAgICAgcm93RGF0YS5wdXNoKGRhdGEpO1xuICAgICAgICByb3dzQnlJbmRleFtpbmRleF0gPSBkYXRhO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgc29ydGVkID0gc29ydEJ5SW5kZXgocm93RGF0YSkuc2xpY2UoMCk7XG4gICAgY29uc3QgY3R4ID0ge1xuICAgICAgICByb3dEYXRhOiByb3dEYXRhLFxuICAgICAgICByb3dzQnlJbmRleDogcm93c0J5SW5kZXgsXG4gICAgICAgIG1lcmdlZENlbGxzOiBtZXJnZWRDZWxsc1xuICAgIH07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNvcnRlZC5sZW5ndGg7IGkrKykge1xuICAgICAgICBmaWxsQ2VsbHMoc29ydGVkW2ldLCBjdHgpO1xuICAgICAgICBkZWxldGUgc29ydGVkW2ldLl9zb3VyY2U7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNvcnRCeUluZGV4KHJvd0RhdGEpO1xufVxuXG5mdW5jdGlvbiBpbmRleFJvd3Mocm93cywgY2FsbGJhY2spIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3Qgcm93ID0gcm93c1tpXTtcbiAgICAgICAgaWYgKCFyb3cpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGluZGV4ID0gcm93LmluZGV4O1xuICAgICAgICBpZiAodHlwZW9mIGluZGV4ICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhyb3csIGluZGV4KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNvcnRCeUluZGV4KGl0ZW1zKSB7XG4gICAgcmV0dXJuIGl0ZW1zLnNvcnQoZnVuY3Rpb24oYSwgYikge1xuICAgICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHB1c2hVbmlxdWUoYXJyYXksIGVsKSB7XG4gICAgaWYgKGFycmF5LmluZGV4T2YoZWwpIDwgMCkge1xuICAgICAgICBhcnJheS5wdXNoKGVsKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdldFNwYW4obWVyZ2VkQ2VsbHMsIHJlZikge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbWVyZ2VkQ2VsbHMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3QgcmFuZ2UgPSBtZXJnZWRDZWxsc1tpXTtcbiAgICAgICAgY29uc3QgYSA9IHJhbmdlLnNwbGl0KFwiOlwiKTtcbiAgICAgICAgbGV0IHRvcExlZnQgPSBhWzBdO1xuICAgICAgICBpZiAodG9wTGVmdCA9PT0gcmVmKSB7XG4gICAgICAgICAgICBsZXQgYm90dG9tUmlnaHQgPSBhWzFdO1xuICAgICAgICAgICAgdG9wTGVmdCA9IHBhcnNlUmVmKHRvcExlZnQpO1xuICAgICAgICAgICAgYm90dG9tUmlnaHQgPSBwYXJzZVJlZihib3R0b21SaWdodCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHJvd1NwYW46IGJvdHRvbVJpZ2h0LnJvdyAtIHRvcExlZnQucm93ICsgMSxcbiAgICAgICAgICAgICAgICBjb2xTcGFuOiBib3R0b21SaWdodC5jb2wgLSB0b3BMZWZ0LmNvbCArIDFcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlUmVmKHJlZikge1xuICAgIGZ1bmN0aW9uIGdldGNvbChzdHIpIHtcbiAgICAgICAgbGV0IHVwcGVyU3RyID0gc3RyLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIGxldCBjb2wgPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVwcGVyU3RyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb2wgPSBjb2wgKiAyNiArIHVwcGVyU3RyLmNoYXJDb2RlQXQoaSkgLSA2NDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sIC0gMTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRyb3coc3RyKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChzdHIsIDEwKSAtIDE7XG4gICAgfVxuXG4gICAgY29uc3QgbSA9IC9eKFthLXpdKykoXFxkKykkL2kuZXhlYyhyZWYpO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJvdzogZ2V0cm93KG1bMl0pLFxuICAgICAgICBjb2w6IGdldGNvbChtWzFdKVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIGZpbGxDZWxscyhkYXRhLCBjdHgpIHtcbiAgICBjb25zdCByb3cgPSBkYXRhLl9zb3VyY2U7XG4gICAgY29uc3Qgcm93SW5kZXggPSBkYXRhLmluZGV4O1xuICAgIGNvbnN0IGNlbGxzID0gcm93LmNlbGxzO1xuICAgIGNvbnN0IGNlbGxEYXRhID0gZGF0YS5jZWxscztcblxuICAgIGlmICghY2VsbHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2VsbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGNlbGxzW2ldIHx8IEVNUFRZX0NFTEw7XG5cbiAgICAgICAgbGV0IHJvd1NwYW4gPSBjZWxsLnJvd1NwYW4gfHwgMTtcbiAgICAgICAgbGV0IGNvbFNwYW4gPSBjZWxsLmNvbFNwYW4gfHwgMTtcblxuICAgICAgICBjb25zdCBjZWxsSW5kZXggPSBpbnNlcnRDZWxsKGNlbGxEYXRhLCBjZWxsKTtcbiAgICAgICAgY29uc3QgdG9wTGVmdFJlZiA9IHJlZihyb3dJbmRleCwgY2VsbEluZGV4KTtcblxuICAgICAgICBpZiAocm93U3BhbiA9PT0gMSAmJiBjb2xTcGFuID09PSAxKSB7XG4gICAgICAgICAgICAvLyBjb3VsZCBzdGlsbCBiZSBtZXJnZWQ6IHRoZSBzcHJlYWRzaGVldCBkb2VzIG5vdCBzZW5kXG4gICAgICAgICAgICAvLyByb3dTcGFuL2NvbFNwYW4sIGJ1dCBtZXJnZWRDZWxscyBpcyBhbHJlYWR5IHBvcHVsYXRlZC5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90ZWxlcmlrL2tlbmRvLXVpLWNvcmUvaXNzdWVzLzI0MDFcbiAgICAgICAgICAgIGNvbnN0IHRtcCA9IGdldFNwYW4oY3R4Lm1lcmdlZENlbGxzLCB0b3BMZWZ0UmVmKTtcbiAgICAgICAgICAgIGlmICh0bXApIHtcbiAgICAgICAgICAgICAgICBjb2xTcGFuID0gdG1wLmNvbFNwYW47XG4gICAgICAgICAgICAgICAgcm93U3BhbiA9IHRtcC5yb3dTcGFuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3BhbkNlbGwoY2VsbCwgY2VsbERhdGEsIGNlbGxJbmRleCwgY29sU3Bhbik7XG5cbiAgICAgICAgaWYgKHJvd1NwYW4gPiAxIHx8IGNvbFNwYW4gPiAxKSB7XG4gICAgICAgICAgICBwdXNoVW5pcXVlKGN0eC5tZXJnZWRDZWxscyxcbiAgICAgICAgICAgICAgICAgICAgICAgdG9wTGVmdFJlZiArIFwiOlwiICsgcmVmKHJvd0luZGV4ICsgcm93U3BhbiAtIDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VsbEluZGV4ICsgY29sU3BhbiAtIDEpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyb3dTcGFuID4gMSkge1xuICAgICAgICAgICAgZm9yIChsZXQgcmkgPSByb3dJbmRleCArIDE7IHJpIDwgcm93SW5kZXggKyByb3dTcGFuOyByaSsrKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5leHRSb3cgPSBjdHgucm93c0J5SW5kZXhbcmldO1xuICAgICAgICAgICAgICAgIGlmICghbmV4dFJvdykge1xuICAgICAgICAgICAgICAgICAgICBuZXh0Um93ID0gY3R4LnJvd3NCeUluZGV4W3JpXSA9IHsgaW5kZXg6IHJpLCBjZWxsczogW10gfTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnJvd0RhdGEucHVzaChuZXh0Um93KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBzcGFuQ2VsbChjZWxsLCBuZXh0Um93LmNlbGxzLCBjZWxsSW5kZXggLSAxLCBjb2xTcGFuICsgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGluc2VydENlbGwoZGF0YSwgY2VsbCkge1xuICAgIGxldCBpbmRleDtcblxuICAgIGlmICh0eXBlb2YgY2VsbC5pbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICBpbmRleCA9IGNlbGwuaW5kZXg7XG4gICAgICAgIGluc2VydENlbGxBdChkYXRhLCBjZWxsLCBjZWxsLmluZGV4KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbmRleCA9IGFwcGVuZENlbGwoZGF0YSwgY2VsbCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGluZGV4O1xufVxuXG5mdW5jdGlvbiBpbnNlcnRDZWxsQXQoZGF0YSwgY2VsbCwgaW5kZXgpIHtcbiAgICBkYXRhW2luZGV4XSA9IGNlbGw7XG59XG5cbmZ1bmN0aW9uIGFwcGVuZENlbGwoZGF0YSwgY2VsbCkge1xuICAgIGxldCBpbmRleCA9IGRhdGEubGVuZ3RoO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aCArIDE7IGkrKykge1xuICAgICAgICBpZiAoIWRhdGFbaV0pIHtcbiAgICAgICAgICAgIGRhdGFbaV0gPSBjZWxsO1xuICAgICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaW5kZXg7XG59XG5cbmZ1bmN0aW9uIHNwYW5DZWxsKGNlbGwsIHJvdywgc3RhcnRJbmRleCwgY29sU3Bhbikge1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY29sU3BhbjsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHRtcCA9IHtcbiAgICAgICAgICAgIGJvcmRlclRvcCAgICA6IGNlbGwuYm9yZGVyVG9wLFxuICAgICAgICAgICAgYm9yZGVyUmlnaHQgIDogY2VsbC5ib3JkZXJSaWdodCxcbiAgICAgICAgICAgIGJvcmRlckJvdHRvbSA6IGNlbGwuYm9yZGVyQm90dG9tLFxuICAgICAgICAgICAgYm9yZGVyTGVmdCAgIDogY2VsbC5ib3JkZXJMZWZ0XG4gICAgICAgIH07XG4gICAgICAgIGluc2VydENlbGxBdChyb3csIHRtcCwgc3RhcnRJbmRleCArIGkpO1xuICAgIH1cbn1cblxuY29uc3QgU1BSRUFEU0hFRVRfRklMVEVSUyA9ICh7IHJlZiwgY29sdW1ucywgZ2VuZXJhdG9ycyB9KSA9PiBgXG48YXV0b0ZpbHRlciByZWY9XCIke3JlZn1cIj5cbiAgJHtmb3JlYWNoKGNvbHVtbnMsIChjb2wpID0+IGBcbiAgICA8ZmlsdGVyQ29sdW1uIGNvbElkPVwiJHtjb2wuaW5kZXh9XCI+XG4gICAgICAke2dlbmVyYXRvcnNbY29sLmZpbHRlcl0oY29sKX1cbiAgICA8L2ZpbHRlckNvbHVtbj5cbiAgYCl9XG48L2F1dG9GaWx0ZXI+YDtcblxuY29uc3QgU1BSRUFEU0hFRVRfQ1VTVE9NX0ZJTFRFUiA9ICh7IGxvZ2ljLCBjcml0ZXJpYSB9KSA9PiBgXG48Y3VzdG9tRmlsdGVycyAke2xvZ2ljID09PSAnYW5kJyA/ICdhbmQ9XCIxXCInIDogJyd9PlxuJHtmb3JlYWNoKGNyaXRlcmlhLCAoZikgPT4ge1xuICAgIGxldCBvcCA9IHNwcmVhZHNoZWV0RmlsdGVycy5jdXN0b21PcGVyYXRvcihmKTtcbiAgICBsZXQgdmFsID0gc3ByZWFkc2hlZXRGaWx0ZXJzLmN1c3RvbVZhbHVlKGYpO1xuICAgIHJldHVybiBgPGN1c3RvbUZpbHRlciAke29wID8gYG9wZXJhdG9yPVwiJHtvcH1cImAgOiAnJ30gdmFsPVwiJHt2YWx9XCIvPmA7XG59KX1cbjwvY3VzdG9tRmlsdGVycz5gO1xuXG5jb25zdCBTUFJFQURTSEVFVF9EWU5BTUlDX0ZJTFRFUiA9ICh7IHR5cGUgfSkgPT5cbmA8ZHluYW1pY0ZpbHRlciB0eXBlPVwiJHtzcHJlYWRzaGVldEZpbHRlcnMuZHluYW1pY0ZpbHRlclR5cGUodHlwZSl9XCIgLz5gO1xuXG5jb25zdCBTUFJFQURTSEVFVF9UT1BfRklMVEVSID0gKHsgdHlwZSwgdmFsdWUgfSkgPT5cbmA8dG9wMTAgcGVyY2VudD1cIiR7L3BlcmNlbnQkL2kudGVzdCh0eXBlKSA/IDEgOiAwfVwiXG4gICAgICAgdG9wPVwiJHsvXnRvcC9pLnRlc3QodHlwZSkgPyAxIDogMH1cIlxuICAgICAgIHZhbD1cIiR7dmFsdWV9XCIgLz5gO1xuXG5jb25zdCBTUFJFQURTSEVFVF9WQUxVRV9GSUxURVIgPSAoeyBibGFua3MsIHZhbHVlcyB9KSA9PlxuICBgPGZpbHRlcnMgJHtibGFua3MgPyAnYmxhbms9XCIxXCInIDogJyd9PlxuICAgICR7Zm9yZWFjaCh2YWx1ZXMsICh2YWx1ZSkgPT4gYFxuICAgICAgPGZpbHRlciB2YWw9XCIke3ZhbHVlfVwiIC8+YCl9XG4gIDwvZmlsdGVycz5gO1xuXG5mdW5jdGlvbiBzcHJlYWRzaGVldEZpbHRlcnMoZmlsdGVyKSB7XG4gICAgcmV0dXJuIFNQUkVBRFNIRUVUX0ZJTFRFUlMoe1xuICAgICAgICByZWY6IGZpbHRlci5yZWYsXG4gICAgICAgIGNvbHVtbnM6IGZpbHRlci5jb2x1bW5zLFxuICAgICAgICBnZW5lcmF0b3JzOiB7XG4gICAgICAgICAgICBjdXN0b20gIDogU1BSRUFEU0hFRVRfQ1VTVE9NX0ZJTFRFUixcbiAgICAgICAgICAgIGR5bmFtaWMgOiBTUFJFQURTSEVFVF9EWU5BTUlDX0ZJTFRFUixcbiAgICAgICAgICAgIHRvcCAgICAgOiBTUFJFQURTSEVFVF9UT1BfRklMVEVSLFxuICAgICAgICAgICAgdmFsdWUgICA6IFNQUkVBRFNIRUVUX1ZBTFVFX0ZJTFRFUlxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbnNwcmVhZHNoZWV0RmlsdGVycy5jdXN0b21PcGVyYXRvciA9IGZ1bmN0aW9uKGYpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlcSAgOiBcImVxdWFsXCIsXG4gICAgICAgIGd0ICA6IFwiZ3JlYXRlclRoYW5cIixcbiAgICAgICAgZ3RlIDogXCJncmVhdGVyVGhhbk9yRXF1YWxcIixcbiAgICAgICAgbHQgIDogXCJsZXNzVGhhblwiLFxuICAgICAgICBsdGUgOiBcImxlc3NUaGFuT3JFcXVhbFwiLFxuICAgICAgICBuZSAgOiBcIm5vdEVxdWFsXCIsXG5cbiAgICAgICAgLy8gVGhlc2UgYXJlIG5vdCBpbiB0aGUgc3BlYywgYnV0IHNlZW1zIHRvIGJlIGhvdyBFeGNlbCBkb2VzXG4gICAgICAgIC8vIGl0IChzZWUgY3VzdG9tVmFsdWUgYmVsb3cpLiAgRm9yIHRoZSBub24tbmVnYXRlZCB2ZXJzaW9ucyxcbiAgICAgICAgLy8gdGhlIG9wZXJhdG9yIGF0dHJpYnV0ZSBpcyBtaXNzaW5nIGNvbXBsZXRlbHkuXG4gICAgICAgIGRvZXNub3RzdGFydHdpdGg6IFwibm90RXF1YWxcIixcbiAgICAgICAgZG9lc25vdGVuZHdpdGg6IFwibm90RXF1YWxcIixcbiAgICAgICAgZG9lc25vdGNvbnRhaW46IFwibm90RXF1YWxcIixcbiAgICAgICAgZG9lc25vdG1hdGNoOiBcIm5vdEVxdWFsXCJcbiAgICB9W2Yub3BlcmF0b3IudG9Mb3dlckNhc2UoKV07XG59O1xuXG5zcHJlYWRzaGVldEZpbHRlcnMuY3VzdG9tVmFsdWUgPSBmdW5jdGlvbihmKSB7XG4gICAgZnVuY3Rpb24gZXNjKHN0cikge1xuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbKj9dKS9nLCBcIn4kMVwiKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGYub3BlcmF0b3IudG9Mb3dlckNhc2UoKSkge1xuICAgICAgICBjYXNlIFwic3RhcnRzd2l0aFwiOlxuICAgICAgICBjYXNlIFwiZG9lc25vdHN0YXJ0d2l0aFwiOlxuICAgICAgICAgICAgcmV0dXJuIGVzYyhmLnZhbHVlKSArIFwiKlwiO1xuXG4gICAgICAgIGNhc2UgXCJlbmRzd2l0aFwiOlxuICAgICAgICBjYXNlIFwiZG9lc25vdGVuZHdpdGhcIjpcbiAgICAgICAgICAgIHJldHVybiBcIipcIiArIGVzYyhmLnZhbHVlKTtcblxuICAgICAgICBjYXNlIFwiY29udGFpbnNcIjpcbiAgICAgICAgY2FzZSBcImRvZXNub3Rjb250YWluXCI6XG4gICAgICAgICAgICByZXR1cm4gXCIqXCIgKyBlc2MoZi52YWx1ZSkgKyBcIipcIjtcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGYudmFsdWU7XG4gICAgfVxufTtcblxuc3ByZWFkc2hlZXRGaWx0ZXJzLmR5bmFtaWNGaWx0ZXJUeXBlID0gZnVuY3Rpb24odHlwZSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHF1YXJ0ZXIxICA6IFwiUTFcIixcbiAgICAgICAgcXVhcnRlcjIgIDogXCJRMlwiLFxuICAgICAgICBxdWFydGVyMyAgOiBcIlEzXCIsXG4gICAgICAgIHF1YXJ0ZXI0ICA6IFwiUTRcIixcbiAgICAgICAgamFudWFyeSAgIDogXCJNMVwiLFxuICAgICAgICBmZWJydWFyeSAgOiBcIk0yXCIsXG4gICAgICAgIG1hcmNoICAgICA6IFwiTTNcIixcbiAgICAgICAgYXByaWwgICAgIDogXCJNNFwiLFxuICAgICAgICBtYXkgICAgICAgOiBcIk01XCIsXG4gICAgICAgIGp1bmUgICAgICA6IFwiTTZcIixcbiAgICAgICAganVseSAgICAgIDogXCJNN1wiLFxuICAgICAgICBhdWd1c3QgICAgOiBcIk04XCIsXG4gICAgICAgIHNlcHRlbWJlciA6IFwiTTlcIixcbiAgICAgICAgb2N0b2JlciAgIDogXCJNMTBcIixcbiAgICAgICAgbm92ZW1iZXIgIDogXCJNMTFcIixcbiAgICAgICAgZGVjZW1iZXIgIDogXCJNMTJcIlxuICAgIH1bdHlwZS50b0xvd2VyQ2FzZSgpXSB8fCB0eXBlO1xufTtcblxuZXhwb3J0IHtcbiAgICBXb3JrYm9vayxcbiAgICBXb3Jrc2hlZXRcbn07XG4iXSwibmFtZXMiOlsibGV0IiwiY29uc3QiLCJ0aGlzIiwiY3VycmVudCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQUEsSUFBSSxPQUFPLEdBQUc7SUFDVixPQUFPLEVBQUUsU0FBUyxRQUFRLEVBQUU7UUFDeEIsT0FBTyxRQUFRLENBQUM7S0FDbkI7Q0FDSixDQUFDOztBQUVGLElBQU0sZUFBZSxHQUFDOztBQUFBLGdCQUNsQixRQUFlLHNCQUFDLGtCQUFrQixFQUFFO0lBQ3BDLE9BQVcsR0FBRyxrQkFBa0IsQ0FBQztDQUNoQyxDQUFBOztBQUVMLGdCQUFJLE9BQWMscUJBQUMsUUFBUSxFQUFFO0lBQ3pCLE9BQVcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztDQUNwQyxDQUFBLEFBR0w7O0FDaEJBQyxJQUFNLFdBQVcs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